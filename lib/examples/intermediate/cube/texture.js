'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var vec3 = require('../../../vec3'),
    arrayUtilities = require('../../../utilities/array');

var divide = arrayUtilities.divide,
    flatten = arrayUtilities.flatten;


var textureCoordinateData = [0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0],
    vertexPositionData = [-1.0, -1.0, +1.0, +1.0, -1.0, +1.0, +1.0, +1.0, +1.0, -1.0, +1.0, +1.0, -1.0, -1.0, -1.0, -1.0, +1.0, -1.0, +1.0, +1.0, -1.0, +1.0, -1.0, -1.0, -1.0, +1.0, -1.0, -1.0, +1.0, +1.0, +1.0, +1.0, +1.0, +1.0, +1.0, -1.0, -1.0, -1.0, -1.0, +1.0, -1.0, -1.0, +1.0, -1.0, +1.0, -1.0, -1.0, +1.0, +1.0, -1.0, -1.0, +1.0, +1.0, -1.0, +1.0, +1.0, +1.0, +1.0, -1.0, +1.0, -1.0, -1.0, -1.0, -1.0, -1.0, +1.0, -1.0, +1.0, +1.0, -1.0, +1.0, -1.0],
    vertexNormalData = [0.0, 0.0, +1.0, 0.0, 0.0, +1.0, 0.0, 0.0, +1.0, 0.0, 0.0, +1.0, 0.0, 0.0, -1.0, 0.0, 0.0, -1.0, 0.0, 0.0, -1.0, 0.0, 0.0, -1.0, 0.0, +1.0, 0.0, 0.0, +1.0, 0.0, 0.0, +1.0, 0.0, 0.0, +1.0, 0.0, 0.0, -1.0, 0.0, 0.0, -1.0, 0.0, 0.0, -1.0, 0.0, 0.0, -1.0, 0.0, +1.0, 0.0, 0.0, +1.0, 0.0, 0.0, +1.0, 0.0, 0.0, +1.0, 0.0, 0.0, -1.0, 0.0, 0.0, -1.0, 0.0, 0.0, -1.0, 0.0, 0.0, -1.0, 0.0, 0.0],
    vertexIndexData = [0, 1, 2, 0, 2, 3, 4, 5, 6, 4, 6, 7, 8, 9, 10, 8, 10, 11, 12, 13, 14, 12, 14, 15, 16, 17, 18, 16, 18, 19, 20, 21, 22, 20, 22, 23];

var TextureCube = function () {
  function TextureCube(vertexPositionBuffer, vertexNormalBuffer, textureCoordinateBuffer, count) {
    _classCallCheck(this, TextureCube);

    this.vertexPositionBuffer = vertexPositionBuffer;
    this.vertexNormalBuffer = vertexNormalBuffer;
    this.textureCoordinateBuffer = textureCoordinateBuffer;
    this.count = count;
  }

  _createClass(TextureCube, [{
    key: 'getCount',
    value: function getCount() {
      return this.count;
    }
  }, {
    key: 'bind',
    value: function bind(textureShader, canvas) {
      textureShader.bindVertexPositionBuffer(this.vertexPositionBuffer, canvas);

      textureShader.bindVertexNormalBuffer(this.vertexNormalBuffer, canvas);

      textureShader.bindTextureCoordinateBuffer(this.textureCoordinateBuffer, canvas);
    }
  }], [{
    key: 'fromOffsetPositionAndImage',
    value: function fromOffsetPositionAndImage(offsetPosition, image, textureShader, canvas) {
      var vertexPositions = divide(vertexPositionData, 3),
          ///
      offsetVertexPositions = vertexPositions.map(function (vertexPosition) {
        var offsetVertexPosition = vec3.add(vertexPosition, offsetPosition);

        return offsetVertexPosition;
      }),
          offsetVertexPositionData = flatten(offsetVertexPositions);

      textureShader.createTexture(image, canvas);

      var vertexPositionBuffer = textureShader.createVertexPositionBuffer(offsetVertexPositionData, canvas),
          vertexNormalBuffer = textureShader.createVertexNormalBuffer(vertexNormalData, canvas),
          textureCoordinateBuffer = textureShader.createTextureCoordinateBuffer(textureCoordinateData, canvas),
          count = canvas.createAndBindElementBuffer(vertexIndexData),
          textureCube = new TextureCube(vertexPositionBuffer, vertexNormalBuffer, textureCoordinateBuffer, count);

      return textureCube;
    }
  }]);

  return TextureCube;
}();

module.exports = TextureCube;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL2VzNi9leGFtcGxlcy9pbnRlcm1lZGlhdGUvY3ViZS90ZXh0dXJlLmpzIl0sIm5hbWVzIjpbInZlYzMiLCJyZXF1aXJlIiwiYXJyYXlVdGlsaXRpZXMiLCJkaXZpZGUiLCJmbGF0dGVuIiwidGV4dHVyZUNvb3JkaW5hdGVEYXRhIiwidmVydGV4UG9zaXRpb25EYXRhIiwidmVydGV4Tm9ybWFsRGF0YSIsInZlcnRleEluZGV4RGF0YSIsIlRleHR1cmVDdWJlIiwidmVydGV4UG9zaXRpb25CdWZmZXIiLCJ2ZXJ0ZXhOb3JtYWxCdWZmZXIiLCJ0ZXh0dXJlQ29vcmRpbmF0ZUJ1ZmZlciIsImNvdW50IiwidGV4dHVyZVNoYWRlciIsImNhbnZhcyIsImJpbmRWZXJ0ZXhQb3NpdGlvbkJ1ZmZlciIsImJpbmRWZXJ0ZXhOb3JtYWxCdWZmZXIiLCJiaW5kVGV4dHVyZUNvb3JkaW5hdGVCdWZmZXIiLCJvZmZzZXRQb3NpdGlvbiIsImltYWdlIiwidmVydGV4UG9zaXRpb25zIiwib2Zmc2V0VmVydGV4UG9zaXRpb25zIiwibWFwIiwidmVydGV4UG9zaXRpb24iLCJvZmZzZXRWZXJ0ZXhQb3NpdGlvbiIsImFkZCIsIm9mZnNldFZlcnRleFBvc2l0aW9uRGF0YSIsImNyZWF0ZVRleHR1cmUiLCJjcmVhdGVWZXJ0ZXhQb3NpdGlvbkJ1ZmZlciIsImNyZWF0ZVZlcnRleE5vcm1hbEJ1ZmZlciIsImNyZWF0ZVRleHR1cmVDb29yZGluYXRlQnVmZmVyIiwiY3JlYXRlQW5kQmluZEVsZW1lbnRCdWZmZXIiLCJ0ZXh0dXJlQ3ViZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7QUFFQSxJQUFNQSxPQUFPQyxRQUFRLGVBQVIsQ0FBYjtBQUFBLElBQ01DLGlCQUFpQkQsUUFBUSwwQkFBUixDQUR2Qjs7SUFHUUUsTSxHQUFvQkQsYyxDQUFwQkMsTTtJQUFRQyxPLEdBQVlGLGMsQ0FBWkUsTzs7O0FBRWhCLElBQU1DLHdCQUF3QixDQUN0QixHQURzQixFQUNoQixHQURnQixFQUV0QixHQUZzQixFQUVoQixHQUZnQixFQUd0QixHQUhzQixFQUdoQixHQUhnQixFQUl0QixHQUpzQixFQUloQixHQUpnQixFQU10QixHQU5zQixFQU1oQixHQU5nQixFQU90QixHQVBzQixFQU9oQixHQVBnQixFQVF0QixHQVJzQixFQVFoQixHQVJnQixFQVN0QixHQVRzQixFQVNoQixHQVRnQixFQVd0QixHQVhzQixFQVdoQixHQVhnQixFQVl0QixHQVpzQixFQVloQixHQVpnQixFQWF0QixHQWJzQixFQWFoQixHQWJnQixFQWN0QixHQWRzQixFQWNoQixHQWRnQixFQWdCdEIsR0FoQnNCLEVBZ0JoQixHQWhCZ0IsRUFpQnRCLEdBakJzQixFQWlCaEIsR0FqQmdCLEVBa0J0QixHQWxCc0IsRUFrQmhCLEdBbEJnQixFQW1CdEIsR0FuQnNCLEVBbUJoQixHQW5CZ0IsRUFxQnRCLEdBckJzQixFQXFCaEIsR0FyQmdCLEVBc0J0QixHQXRCc0IsRUFzQmhCLEdBdEJnQixFQXVCdEIsR0F2QnNCLEVBdUJoQixHQXZCZ0IsRUF3QnRCLEdBeEJzQixFQXdCaEIsR0F4QmdCLEVBMEJ0QixHQTFCc0IsRUEwQmhCLEdBMUJnQixFQTJCdEIsR0EzQnNCLEVBMkJoQixHQTNCZ0IsRUE0QnRCLEdBNUJzQixFQTRCaEIsR0E1QmdCLEVBNkJ0QixHQTdCc0IsRUE2QmhCLEdBN0JnQixDQUE5QjtBQUFBLElBK0JNQyxxQkFBcUIsQ0FDbkIsQ0FBQyxHQURrQixFQUNiLENBQUMsR0FEWSxFQUNQLENBQUMsR0FETSxFQUVuQixDQUFDLEdBRmtCLEVBRWIsQ0FBQyxHQUZZLEVBRVAsQ0FBQyxHQUZNLEVBR25CLENBQUMsR0FIa0IsRUFHYixDQUFDLEdBSFksRUFHUCxDQUFDLEdBSE0sRUFJbkIsQ0FBQyxHQUprQixFQUliLENBQUMsR0FKWSxFQUlQLENBQUMsR0FKTSxFQU1uQixDQUFDLEdBTmtCLEVBTWIsQ0FBQyxHQU5ZLEVBTVAsQ0FBQyxHQU5NLEVBT25CLENBQUMsR0FQa0IsRUFPYixDQUFDLEdBUFksRUFPUCxDQUFDLEdBUE0sRUFRbkIsQ0FBQyxHQVJrQixFQVFiLENBQUMsR0FSWSxFQVFQLENBQUMsR0FSTSxFQVNuQixDQUFDLEdBVGtCLEVBU2IsQ0FBQyxHQVRZLEVBU1AsQ0FBQyxHQVRNLEVBV25CLENBQUMsR0FYa0IsRUFXYixDQUFDLEdBWFksRUFXUCxDQUFDLEdBWE0sRUFZbkIsQ0FBQyxHQVprQixFQVliLENBQUMsR0FaWSxFQVlQLENBQUMsR0FaTSxFQWFuQixDQUFDLEdBYmtCLEVBYWIsQ0FBQyxHQWJZLEVBYVAsQ0FBQyxHQWJNLEVBY25CLENBQUMsR0Fka0IsRUFjYixDQUFDLEdBZFksRUFjUCxDQUFDLEdBZE0sRUFnQm5CLENBQUMsR0FoQmtCLEVBZ0JiLENBQUMsR0FoQlksRUFnQlAsQ0FBQyxHQWhCTSxFQWlCbkIsQ0FBQyxHQWpCa0IsRUFpQmIsQ0FBQyxHQWpCWSxFQWlCUCxDQUFDLEdBakJNLEVBa0JuQixDQUFDLEdBbEJrQixFQWtCYixDQUFDLEdBbEJZLEVBa0JQLENBQUMsR0FsQk0sRUFtQm5CLENBQUMsR0FuQmtCLEVBbUJiLENBQUMsR0FuQlksRUFtQlAsQ0FBQyxHQW5CTSxFQXFCbkIsQ0FBQyxHQXJCa0IsRUFxQmIsQ0FBQyxHQXJCWSxFQXFCUCxDQUFDLEdBckJNLEVBc0JuQixDQUFDLEdBdEJrQixFQXNCYixDQUFDLEdBdEJZLEVBc0JQLENBQUMsR0F0Qk0sRUF1Qm5CLENBQUMsR0F2QmtCLEVBdUJiLENBQUMsR0F2QlksRUF1QlAsQ0FBQyxHQXZCTSxFQXdCbkIsQ0FBQyxHQXhCa0IsRUF3QmIsQ0FBQyxHQXhCWSxFQXdCUCxDQUFDLEdBeEJNLEVBMEJuQixDQUFDLEdBMUJrQixFQTBCYixDQUFDLEdBMUJZLEVBMEJQLENBQUMsR0ExQk0sRUEyQm5CLENBQUMsR0EzQmtCLEVBMkJiLENBQUMsR0EzQlksRUEyQlAsQ0FBQyxHQTNCTSxFQTRCbkIsQ0FBQyxHQTVCa0IsRUE0QmIsQ0FBQyxHQTVCWSxFQTRCUCxDQUFDLEdBNUJNLEVBNkJuQixDQUFDLEdBN0JrQixFQTZCYixDQUFDLEdBN0JZLEVBNkJQLENBQUMsR0E3Qk0sQ0EvQjNCO0FBQUEsSUE4RE1DLG1CQUFtQixDQUNqQixHQURpQixFQUNYLEdBRFcsRUFDTixDQUFDLEdBREssRUFFakIsR0FGaUIsRUFFWCxHQUZXLEVBRU4sQ0FBQyxHQUZLLEVBR2pCLEdBSGlCLEVBR1gsR0FIVyxFQUdOLENBQUMsR0FISyxFQUlqQixHQUppQixFQUlYLEdBSlcsRUFJTixDQUFDLEdBSkssRUFNakIsR0FOaUIsRUFNWCxHQU5XLEVBTU4sQ0FBQyxHQU5LLEVBT2pCLEdBUGlCLEVBT1gsR0FQVyxFQU9OLENBQUMsR0FQSyxFQVFqQixHQVJpQixFQVFYLEdBUlcsRUFRTixDQUFDLEdBUkssRUFTakIsR0FUaUIsRUFTWCxHQVRXLEVBU04sQ0FBQyxHQVRLLEVBV2pCLEdBWGlCLEVBV1osQ0FBQyxHQVhXLEVBV0wsR0FYSyxFQVlqQixHQVppQixFQVlaLENBQUMsR0FaVyxFQVlMLEdBWkssRUFhakIsR0FiaUIsRUFhWixDQUFDLEdBYlcsRUFhTCxHQWJLLEVBY2pCLEdBZGlCLEVBY1osQ0FBQyxHQWRXLEVBY0wsR0FkSyxFQWdCakIsR0FoQmlCLEVBZ0JaLENBQUMsR0FoQlcsRUFnQkwsR0FoQkssRUFpQmpCLEdBakJpQixFQWlCWixDQUFDLEdBakJXLEVBaUJMLEdBakJLLEVBa0JqQixHQWxCaUIsRUFrQlosQ0FBQyxHQWxCVyxFQWtCTCxHQWxCSyxFQW1CakIsR0FuQmlCLEVBbUJaLENBQUMsR0FuQlcsRUFtQkwsR0FuQkssRUFxQmpCLENBQUMsR0FyQmdCLEVBcUJWLEdBckJVLEVBcUJKLEdBckJJLEVBc0JqQixDQUFDLEdBdEJnQixFQXNCVixHQXRCVSxFQXNCSixHQXRCSSxFQXVCakIsQ0FBQyxHQXZCZ0IsRUF1QlYsR0F2QlUsRUF1QkosR0F2QkksRUF3QmpCLENBQUMsR0F4QmdCLEVBd0JWLEdBeEJVLEVBd0JKLEdBeEJJLEVBMEJqQixDQUFDLEdBMUJnQixFQTBCVixHQTFCVSxFQTBCSixHQTFCSSxFQTJCakIsQ0FBQyxHQTNCZ0IsRUEyQlYsR0EzQlUsRUEyQkosR0EzQkksRUE0QmpCLENBQUMsR0E1QmdCLEVBNEJWLEdBNUJVLEVBNEJKLEdBNUJJLEVBNkJqQixDQUFDLEdBN0JnQixFQTZCVixHQTdCVSxFQTZCSixHQTdCSSxDQTlEekI7QUFBQSxJQTZGTUMsa0JBQWtCLENBQ2hCLENBRGdCLEVBQ1osQ0FEWSxFQUNSLENBRFEsRUFFaEIsQ0FGZ0IsRUFFWixDQUZZLEVBRVIsQ0FGUSxFQUloQixDQUpnQixFQUlaLENBSlksRUFJUixDQUpRLEVBS2hCLENBTGdCLEVBS1osQ0FMWSxFQUtSLENBTFEsRUFPaEIsQ0FQZ0IsRUFPWixDQVBZLEVBT1QsRUFQUyxFQVFoQixDQVJnQixFQVFiLEVBUmEsRUFRVCxFQVJTLEVBVWhCLEVBVmdCLEVBVVosRUFWWSxFQVVSLEVBVlEsRUFXaEIsRUFYZ0IsRUFXWixFQVhZLEVBV1IsRUFYUSxFQWFoQixFQWJnQixFQWFaLEVBYlksRUFhUixFQWJRLEVBY2hCLEVBZGdCLEVBY1osRUFkWSxFQWNSLEVBZFEsRUFnQmhCLEVBaEJnQixFQWdCWixFQWhCWSxFQWdCUixFQWhCUSxFQWlCaEIsRUFqQmdCLEVBaUJaLEVBakJZLEVBaUJSLEVBakJRLENBN0Z4Qjs7SUFpSE1DLFc7QUFDSix1QkFBWUMsb0JBQVosRUFBa0NDLGtCQUFsQyxFQUFzREMsdUJBQXRELEVBQStFQyxLQUEvRSxFQUFzRjtBQUFBOztBQUNwRixTQUFLSCxvQkFBTCxHQUE0QkEsb0JBQTVCO0FBQ0EsU0FBS0Msa0JBQUwsR0FBMEJBLGtCQUExQjtBQUNBLFNBQUtDLHVCQUFMLEdBQStCQSx1QkFBL0I7QUFDQSxTQUFLQyxLQUFMLEdBQWFBLEtBQWI7QUFDRDs7OzsrQkFFVTtBQUNULGFBQU8sS0FBS0EsS0FBWjtBQUNEOzs7eUJBRUlDLGEsRUFBZUMsTSxFQUFRO0FBQzFCRCxvQkFBY0Usd0JBQWQsQ0FBdUMsS0FBS04sb0JBQTVDLEVBQWtFSyxNQUFsRTs7QUFFQUQsb0JBQWNHLHNCQUFkLENBQXFDLEtBQUtOLGtCQUExQyxFQUE4REksTUFBOUQ7O0FBRUFELG9CQUFjSSwyQkFBZCxDQUEwQyxLQUFLTix1QkFBL0MsRUFBd0VHLE1BQXhFO0FBQ0Q7OzsrQ0FFaUNJLGMsRUFBZ0JDLEssRUFBT04sYSxFQUFlQyxNLEVBQVE7QUFDOUUsVUFBTU0sa0JBQWtCbEIsT0FBT0csa0JBQVAsRUFBMkIsQ0FBM0IsQ0FBeEI7QUFBQSxVQUF3RDtBQUNsRGdCLDhCQUF3QkQsZ0JBQWdCRSxHQUFoQixDQUFvQixVQUFTQyxjQUFULEVBQXlCO0FBQ25FLFlBQU1DLHVCQUF1QnpCLEtBQUswQixHQUFMLENBQVNGLGNBQVQsRUFBeUJMLGNBQXpCLENBQTdCOztBQUVBLGVBQU9NLG9CQUFQO0FBQ0QsT0FKdUIsQ0FEOUI7QUFBQSxVQU1NRSwyQkFBMkJ2QixRQUFRa0IscUJBQVIsQ0FOakM7O0FBUUFSLG9CQUFjYyxhQUFkLENBQTRCUixLQUE1QixFQUFtQ0wsTUFBbkM7O0FBRUEsVUFBTUwsdUJBQXVCSSxjQUFjZSwwQkFBZCxDQUF5Q0Ysd0JBQXpDLEVBQW1FWixNQUFuRSxDQUE3QjtBQUFBLFVBQ01KLHFCQUFxQkcsY0FBY2dCLHdCQUFkLENBQXVDdkIsZ0JBQXZDLEVBQXlEUSxNQUF6RCxDQUQzQjtBQUFBLFVBRU1ILDBCQUEwQkUsY0FBY2lCLDZCQUFkLENBQTRDMUIscUJBQTVDLEVBQW1FVSxNQUFuRSxDQUZoQztBQUFBLFVBR01GLFFBQVFFLE9BQU9pQiwwQkFBUCxDQUFrQ3hCLGVBQWxDLENBSGQ7QUFBQSxVQUlNeUIsY0FBYyxJQUFJeEIsV0FBSixDQUFnQkMsb0JBQWhCLEVBQXNDQyxrQkFBdEMsRUFBMERDLHVCQUExRCxFQUFtRkMsS0FBbkYsQ0FKcEI7O0FBTUEsYUFBT29CLFdBQVA7QUFDRDs7Ozs7O0FBR0hDLE9BQU9DLE9BQVAsR0FBaUIxQixXQUFqQiIsImZpbGUiOiJ0ZXh0dXJlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCB2ZWMzID0gcmVxdWlyZSgnLi4vLi4vLi4vdmVjMycpLFxuICAgICAgYXJyYXlVdGlsaXRpZXMgPSByZXF1aXJlKCcuLi8uLi8uLi91dGlsaXRpZXMvYXJyYXknKTtcblxuY29uc3QgeyBkaXZpZGUsIGZsYXR0ZW4gfSA9IGFycmF5VXRpbGl0aWVzO1xuXG5jb25zdCB0ZXh0dXJlQ29vcmRpbmF0ZURhdGEgPSBbXG4gICAgICAgIDAuMCwgIDAuMCxcbiAgICAgICAgMS4wLCAgMC4wLFxuICAgICAgICAxLjAsICAxLjAsXG4gICAgICAgIDAuMCwgIDEuMCxcblxuICAgICAgICAwLjAsICAwLjAsXG4gICAgICAgIDEuMCwgIDAuMCxcbiAgICAgICAgMS4wLCAgMS4wLFxuICAgICAgICAwLjAsICAxLjAsXG5cbiAgICAgICAgMC4wLCAgMC4wLFxuICAgICAgICAxLjAsICAwLjAsXG4gICAgICAgIDEuMCwgIDEuMCxcbiAgICAgICAgMC4wLCAgMS4wLFxuXG4gICAgICAgIDAuMCwgIDAuMCxcbiAgICAgICAgMS4wLCAgMC4wLFxuICAgICAgICAxLjAsICAxLjAsXG4gICAgICAgIDAuMCwgIDEuMCxcblxuICAgICAgICAwLjAsICAwLjAsXG4gICAgICAgIDEuMCwgIDAuMCxcbiAgICAgICAgMS4wLCAgMS4wLFxuICAgICAgICAwLjAsICAxLjAsXG5cbiAgICAgICAgMC4wLCAgMC4wLFxuICAgICAgICAxLjAsICAwLjAsXG4gICAgICAgIDEuMCwgIDEuMCxcbiAgICAgICAgMC4wLCAgMS4wXG4gICAgICBdLFxuICAgICAgdmVydGV4UG9zaXRpb25EYXRhID0gW1xuICAgICAgICAtMS4wLCAtMS4wLCArMS4wLFxuICAgICAgICArMS4wLCAtMS4wLCArMS4wLFxuICAgICAgICArMS4wLCArMS4wLCArMS4wLFxuICAgICAgICAtMS4wLCArMS4wLCArMS4wLFxuXG4gICAgICAgIC0xLjAsIC0xLjAsIC0xLjAsXG4gICAgICAgIC0xLjAsICsxLjAsIC0xLjAsXG4gICAgICAgICsxLjAsICsxLjAsIC0xLjAsXG4gICAgICAgICsxLjAsIC0xLjAsIC0xLjAsXG5cbiAgICAgICAgLTEuMCwgKzEuMCwgLTEuMCxcbiAgICAgICAgLTEuMCwgKzEuMCwgKzEuMCxcbiAgICAgICAgKzEuMCwgKzEuMCwgKzEuMCxcbiAgICAgICAgKzEuMCwgKzEuMCwgLTEuMCxcblxuICAgICAgICAtMS4wLCAtMS4wLCAtMS4wLFxuICAgICAgICArMS4wLCAtMS4wLCAtMS4wLFxuICAgICAgICArMS4wLCAtMS4wLCArMS4wLFxuICAgICAgICAtMS4wLCAtMS4wLCArMS4wLFxuXG4gICAgICAgICsxLjAsIC0xLjAsIC0xLjAsXG4gICAgICAgICsxLjAsICsxLjAsIC0xLjAsXG4gICAgICAgICsxLjAsICsxLjAsICsxLjAsXG4gICAgICAgICsxLjAsIC0xLjAsICsxLjAsXG5cbiAgICAgICAgLTEuMCwgLTEuMCwgLTEuMCxcbiAgICAgICAgLTEuMCwgLTEuMCwgKzEuMCxcbiAgICAgICAgLTEuMCwgKzEuMCwgKzEuMCxcbiAgICAgICAgLTEuMCwgKzEuMCwgLTEuMFxuICAgICAgXSxcbiAgICAgIHZlcnRleE5vcm1hbERhdGEgPSBbXG4gICAgICAgIDAuMCwgIDAuMCwgKzEuMCxcbiAgICAgICAgMC4wLCAgMC4wLCArMS4wLFxuICAgICAgICAwLjAsICAwLjAsICsxLjAsXG4gICAgICAgIDAuMCwgIDAuMCwgKzEuMCxcblxuICAgICAgICAwLjAsICAwLjAsIC0xLjAsXG4gICAgICAgIDAuMCwgIDAuMCwgLTEuMCxcbiAgICAgICAgMC4wLCAgMC4wLCAtMS4wLFxuICAgICAgICAwLjAsICAwLjAsIC0xLjAsXG5cbiAgICAgICAgMC4wLCArMS4wLCAgMC4wLFxuICAgICAgICAwLjAsICsxLjAsICAwLjAsXG4gICAgICAgIDAuMCwgKzEuMCwgIDAuMCxcbiAgICAgICAgMC4wLCArMS4wLCAgMC4wLFxuXG4gICAgICAgIDAuMCwgLTEuMCwgIDAuMCxcbiAgICAgICAgMC4wLCAtMS4wLCAgMC4wLFxuICAgICAgICAwLjAsIC0xLjAsICAwLjAsXG4gICAgICAgIDAuMCwgLTEuMCwgIDAuMCxcblxuICAgICAgICArMS4wLCAgMC4wLCAgMC4wLFxuICAgICAgICArMS4wLCAgMC4wLCAgMC4wLFxuICAgICAgICArMS4wLCAgMC4wLCAgMC4wLFxuICAgICAgICArMS4wLCAgMC4wLCAgMC4wLFxuXG4gICAgICAgIC0xLjAsICAwLjAsICAwLjAsXG4gICAgICAgIC0xLjAsICAwLjAsICAwLjAsXG4gICAgICAgIC0xLjAsICAwLjAsICAwLjAsXG4gICAgICAgIC0xLjAsICAwLjAsICAwLjBcbiAgICAgIF0sXG4gICAgICB2ZXJ0ZXhJbmRleERhdGEgPSBbXG4gICAgICAgIDAsICAxLCAgMixcbiAgICAgICAgMCwgIDIsICAzLFxuXG4gICAgICAgIDQsICA1LCAgNixcbiAgICAgICAgNCwgIDYsICA3LFxuXG4gICAgICAgIDgsICA5LCAxMCxcbiAgICAgICAgOCwgMTAsIDExLFxuXG4gICAgICAgIDEyLCAxMywgMTQsXG4gICAgICAgIDEyLCAxNCwgMTUsXG5cbiAgICAgICAgMTYsIDE3LCAxOCxcbiAgICAgICAgMTYsIDE4LCAxOSxcblxuICAgICAgICAyMCwgMjEsIDIyLFxuICAgICAgICAyMCwgMjIsIDIzXG4gICAgICBdO1xuXG5jbGFzcyBUZXh0dXJlQ3ViZSB7XG4gIGNvbnN0cnVjdG9yKHZlcnRleFBvc2l0aW9uQnVmZmVyLCB2ZXJ0ZXhOb3JtYWxCdWZmZXIsIHRleHR1cmVDb29yZGluYXRlQnVmZmVyLCBjb3VudCkge1xuICAgIHRoaXMudmVydGV4UG9zaXRpb25CdWZmZXIgPSB2ZXJ0ZXhQb3NpdGlvbkJ1ZmZlcjtcbiAgICB0aGlzLnZlcnRleE5vcm1hbEJ1ZmZlciA9IHZlcnRleE5vcm1hbEJ1ZmZlcjtcbiAgICB0aGlzLnRleHR1cmVDb29yZGluYXRlQnVmZmVyID0gdGV4dHVyZUNvb3JkaW5hdGVCdWZmZXI7XG4gICAgdGhpcy5jb3VudCA9IGNvdW50O1xuICB9XG5cbiAgZ2V0Q291bnQoKSB7XG4gICAgcmV0dXJuIHRoaXMuY291bnQ7XG4gIH1cblxuICBiaW5kKHRleHR1cmVTaGFkZXIsIGNhbnZhcykge1xuICAgIHRleHR1cmVTaGFkZXIuYmluZFZlcnRleFBvc2l0aW9uQnVmZmVyKHRoaXMudmVydGV4UG9zaXRpb25CdWZmZXIsIGNhbnZhcyk7XG5cbiAgICB0ZXh0dXJlU2hhZGVyLmJpbmRWZXJ0ZXhOb3JtYWxCdWZmZXIodGhpcy52ZXJ0ZXhOb3JtYWxCdWZmZXIsIGNhbnZhcyk7XG5cbiAgICB0ZXh0dXJlU2hhZGVyLmJpbmRUZXh0dXJlQ29vcmRpbmF0ZUJ1ZmZlcih0aGlzLnRleHR1cmVDb29yZGluYXRlQnVmZmVyLCBjYW52YXMpO1xuICB9XG5cbiAgc3RhdGljIGZyb21PZmZzZXRQb3NpdGlvbkFuZEltYWdlKG9mZnNldFBvc2l0aW9uLCBpbWFnZSwgdGV4dHVyZVNoYWRlciwgY2FudmFzKSB7XG4gICAgY29uc3QgdmVydGV4UG9zaXRpb25zID0gZGl2aWRlKHZlcnRleFBvc2l0aW9uRGF0YSwgMyksICAvLy9cbiAgICAgICAgICBvZmZzZXRWZXJ0ZXhQb3NpdGlvbnMgPSB2ZXJ0ZXhQb3NpdGlvbnMubWFwKGZ1bmN0aW9uKHZlcnRleFBvc2l0aW9uKSB7XG4gICAgICAgICAgICBjb25zdCBvZmZzZXRWZXJ0ZXhQb3NpdGlvbiA9IHZlYzMuYWRkKHZlcnRleFBvc2l0aW9uLCBvZmZzZXRQb3NpdGlvbik7XG5cbiAgICAgICAgICAgIHJldHVybiBvZmZzZXRWZXJ0ZXhQb3NpdGlvbjtcbiAgICAgICAgICB9KSxcbiAgICAgICAgICBvZmZzZXRWZXJ0ZXhQb3NpdGlvbkRhdGEgPSBmbGF0dGVuKG9mZnNldFZlcnRleFBvc2l0aW9ucyk7XG5cbiAgICB0ZXh0dXJlU2hhZGVyLmNyZWF0ZVRleHR1cmUoaW1hZ2UsIGNhbnZhcyk7XG5cbiAgICBjb25zdCB2ZXJ0ZXhQb3NpdGlvbkJ1ZmZlciA9IHRleHR1cmVTaGFkZXIuY3JlYXRlVmVydGV4UG9zaXRpb25CdWZmZXIob2Zmc2V0VmVydGV4UG9zaXRpb25EYXRhLCBjYW52YXMpLFxuICAgICAgICAgIHZlcnRleE5vcm1hbEJ1ZmZlciA9IHRleHR1cmVTaGFkZXIuY3JlYXRlVmVydGV4Tm9ybWFsQnVmZmVyKHZlcnRleE5vcm1hbERhdGEsIGNhbnZhcyksXG4gICAgICAgICAgdGV4dHVyZUNvb3JkaW5hdGVCdWZmZXIgPSB0ZXh0dXJlU2hhZGVyLmNyZWF0ZVRleHR1cmVDb29yZGluYXRlQnVmZmVyKHRleHR1cmVDb29yZGluYXRlRGF0YSwgY2FudmFzKSxcbiAgICAgICAgICBjb3VudCA9IGNhbnZhcy5jcmVhdGVBbmRCaW5kRWxlbWVudEJ1ZmZlcih2ZXJ0ZXhJbmRleERhdGEpLFxuICAgICAgICAgIHRleHR1cmVDdWJlID0gbmV3IFRleHR1cmVDdWJlKHZlcnRleFBvc2l0aW9uQnVmZmVyLCB2ZXJ0ZXhOb3JtYWxCdWZmZXIsIHRleHR1cmVDb29yZGluYXRlQnVmZmVyLCBjb3VudCk7XG5cbiAgICByZXR1cm4gdGV4dHVyZUN1YmU7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBUZXh0dXJlQ3ViZTtcbiJdfQ==