'use strict';

var vec3 = require('../../../vec3'),
    TextureShader = require('../../../shader/texture'),
    arrayUtilities = require('../../../utilities/array');

var divide = arrayUtilities.divide,
    flatten = arrayUtilities.flatten;


var textureCoordinateData = [0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0],
    vertexPositionData = [-1.0, -1.0, +1.0, +1.0, -1.0, +1.0, +1.0, +1.0, +1.0, -1.0, +1.0, +1.0, -1.0, -1.0, -1.0, -1.0, +1.0, -1.0, +1.0, +1.0, -1.0, +1.0, -1.0, -1.0, -1.0, +1.0, -1.0, -1.0, +1.0, +1.0, +1.0, +1.0, +1.0, +1.0, +1.0, -1.0, -1.0, -1.0, -1.0, +1.0, -1.0, -1.0, +1.0, -1.0, +1.0, -1.0, -1.0, +1.0, +1.0, -1.0, -1.0, +1.0, +1.0, -1.0, +1.0, +1.0, +1.0, +1.0, -1.0, +1.0, -1.0, -1.0, -1.0, -1.0, -1.0, +1.0, -1.0, +1.0, +1.0, -1.0, +1.0, -1.0],
    vertexNormalData = [0.0, 0.0, +1.0, 0.0, 0.0, +1.0, 0.0, 0.0, +1.0, 0.0, 0.0, +1.0, 0.0, 0.0, -1.0, 0.0, 0.0, -1.0, 0.0, 0.0, -1.0, 0.0, 0.0, -1.0, 0.0, +1.0, 0.0, 0.0, +1.0, 0.0, 0.0, +1.0, 0.0, 0.0, +1.0, 0.0, 0.0, -1.0, 0.0, 0.0, -1.0, 0.0, 0.0, -1.0, 0.0, 0.0, -1.0, 0.0, +1.0, 0.0, 0.0, +1.0, 0.0, 0.0, +1.0, 0.0, 0.0, +1.0, 0.0, 0.0, -1.0, 0.0, 0.0, -1.0, 0.0, 0.0, -1.0, 0.0, 0.0, -1.0, 0.0, 0.0],
    vertexIndexData = [0, 1, 2, 0, 2, 3, 4, 5, 6, 4, 6, 7, 8, 9, 10, 8, 10, 11, 12, 13, 14, 12, 14, 15, 16, 17, 18, 16, 18, 19, 20, 21, 22, 20, 22, 23];

var textureCube = function textureCube(offsetPosition, image, canvas, callback) {
  var textureShader = TextureShader.fromNothing(canvas),
      vertexPositions = divide(vertexPositionData, 3),
      ///
  offsetVertexPositions = vertexPositions.map(function (vertexPosition) {
    var offsetVertexPosition = vec3.add(vertexPosition, offsetPosition);

    return offsetVertexPosition;
  }),
      offsetVertexPositionData = flatten(offsetVertexPositions);

  textureShader.createAndBindVertexPositionBuffer(offsetVertexPositionData, canvas);

  textureShader.createAndBindTextureCoordinateBuffer(textureCoordinateData, canvas);

  textureShader.createAndBindVertexNormalBuffer(vertexNormalData, canvas);

  var count = canvas.createAndBindElementBuffer(vertexIndexData),
      shader = textureShader; ///

  canvas.useShader(shader);

  textureShader.createAndActivateTexture(image, canvas);

  callback(count, shader);
};

module.exports = textureCube;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL2VzNi9leGFtcGxlcy9pbnRlcm1lZGlhdGUvY3ViZS90ZXh0dXJlLmpzIl0sIm5hbWVzIjpbInZlYzMiLCJyZXF1aXJlIiwiVGV4dHVyZVNoYWRlciIsImFycmF5VXRpbGl0aWVzIiwiZGl2aWRlIiwiZmxhdHRlbiIsInRleHR1cmVDb29yZGluYXRlRGF0YSIsInZlcnRleFBvc2l0aW9uRGF0YSIsInZlcnRleE5vcm1hbERhdGEiLCJ2ZXJ0ZXhJbmRleERhdGEiLCJ0ZXh0dXJlQ3ViZSIsIm9mZnNldFBvc2l0aW9uIiwiaW1hZ2UiLCJjYW52YXMiLCJjYWxsYmFjayIsInRleHR1cmVTaGFkZXIiLCJmcm9tTm90aGluZyIsInZlcnRleFBvc2l0aW9ucyIsIm9mZnNldFZlcnRleFBvc2l0aW9ucyIsIm1hcCIsInZlcnRleFBvc2l0aW9uIiwib2Zmc2V0VmVydGV4UG9zaXRpb24iLCJhZGQiLCJvZmZzZXRWZXJ0ZXhQb3NpdGlvbkRhdGEiLCJjcmVhdGVBbmRCaW5kVmVydGV4UG9zaXRpb25CdWZmZXIiLCJjcmVhdGVBbmRCaW5kVGV4dHVyZUNvb3JkaW5hdGVCdWZmZXIiLCJjcmVhdGVBbmRCaW5kVmVydGV4Tm9ybWFsQnVmZmVyIiwiY291bnQiLCJjcmVhdGVBbmRCaW5kRWxlbWVudEJ1ZmZlciIsInNoYWRlciIsInVzZVNoYWRlciIsImNyZWF0ZUFuZEFjdGl2YXRlVGV4dHVyZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBLElBQU1BLE9BQU9DLFFBQVEsZUFBUixDQUFiO0FBQUEsSUFDTUMsZ0JBQWdCRCxRQUFRLHlCQUFSLENBRHRCO0FBQUEsSUFFTUUsaUJBQWlCRixRQUFRLDBCQUFSLENBRnZCOztJQUlRRyxNLEdBQW9CRCxjLENBQXBCQyxNO0lBQVFDLE8sR0FBWUYsYyxDQUFaRSxPOzs7QUFFaEIsSUFBTUMsd0JBQXdCLENBQ3RCLEdBRHNCLEVBQ2hCLEdBRGdCLEVBRXRCLEdBRnNCLEVBRWhC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Q0FQakM7O0FBU0FILGdCQUFjUyxpQ0FBZCxDQUFnREQsd0JBQWhELEVBQTBFVixNQUExRTs7QUFFQUUsZ0JBQWNVLG9DQUFkLENBQW1EbkIscUJBQW5ELEVBQTBFTyxNQUExRTs7QUFFQUUsZ0JBQWNXLCtCQUFkLENBQThDbEIsZ0JBQTlDLEVBQWdFSyxNQUFoRTs7QUFFQSxNQUFNYyxRQUFRZCxPQUFPZSwwQkFBUCxDQUFrQ25CLGVBQWxDLENBQWQ7QUFBQSxNQUNNb0IsU0FBU2QsYUFEZixDQWhCK0QsQ0FpQmpDOztBQUU5QkYsU0FBT2lCLFNBQVAsQ0FBaUJELE1BQWpCOztBQUVBZCxnQkFBY2dCLHdCQUFkLENBQXVDbkIsS0FBdkMsRUFBOENDLE1BQTlDOztBQUVBQyxXQUFTYSxLQUFULEVBQWdCRSxNQUFoQjtBQUNELENBeEJEOztBQTBCQUcsT0FBT0MsT0FBUCxHQUFpQnZCLFdBQWpCIiwiZmlsZSI6InRleHR1cmUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmNvbnN0IHZlYzMgPSByZXF1aXJlKCcuLi8uLi8uLi92ZWMzJyksXG4gICAgICBUZXh0dXJlU2hhZGVyID0gcmVxdWlyZSgnLi4vLi4vLi4vc2hhZGVyL3RleHR1cmUnKSxcbiAgICAgIGFycmF5VXRpbGl0aWVzID0gcmVxdWlyZSgnLi4vLi4vLi4vdXRpbGl0aWVzL2FycmF5Jyk7XG5cbmNvbnN0IHsgZGl2aWRlLCBmbGF0dGVuIH0gPSBhcnJheVV0aWxpdGllcztcblxuY29uc3QgdGV4dHVyZUNvb3JkaW5hdGVEYXRhID0gW1xuICAgICAgICAwLjAsICAwLjAsXG4gICAgICAgIDEuMCwgIDAuMCxcbiAgICAgICAgMS4wLCAgMS4wLFxuICAgICAgICAwLjAsICAxLjAsXG5cbiAgICAgICAgMC4wLCAgMC4wLFxuICAgICAgICAxLjAsICAwLjAsXG4gICAgICAgIDEuMCwgIDEuMCxcbiAgICAgICAgMC4wLCAgMS4wLFxuXG4gICAgICAgIDAuMCwgIDAuMCxcbiAgICAgICAgMS4wLCAgMC4wLFxuICAgICAgICAxLjAsICAxLjAsXG4gICAgICAgIDAuMCwgIDEuMCxcblxuICAgICAgICAwLjAsICAwLjAsXG4gICAgICAgIDEuMCwgIDAuMCxcbiAgICAgICAgMS4wLCAgMS4wLFxuICAgICAgICAwLjAsICAxLjAsXG5cbiAgICAgICAgMC4wLCAgMC4wLFxuICAgICAgICAxLjAsICAwLjAsXG4gICAgICAgIDEuMCwgIDEuMCxcbiAgICAgICAgMC4wLCAgMS4wLFxuXG4gICAgICAgIDAuMCwgIDAuMCxcbiAgICAgICAgMS4wLCAgMC4wLFxuICAgICAgICAxLjAsICAxLjAsXG4gICAgICAgIDAuMCwgIDEuMFxuICAgICAgXSxcbiAgICAgIHZlcnRleFBvc2l0aW9uRGF0YSA9IFtcbiAgICAgICAgLTEuMCwgLTEuMCwgKzEuMCxcbiAgICAgICAgKzEuMCwgLTEuMCwgKzEuMCxcbiAgICAgICAgKzEuMCwgKzEuMCwgKzEuMCxcbiAgICAgICAgLTEuMCwgKzEuMCwgKzEuMCxcblxuICAgICAgICAtMS4wLCAtMS4wLCAtMS4wLFxuICAgICAgICAtMS4wLCArMS4wLCAtMS4wLFxuICAgICAgICArMS4wLCArMS4wLCAtMS4wLFxuICAgICAgICArMS4wLCAtMS4wLCAtMS4wLFxuXG4gICAgICAgIC0xLjAsICsxLjAsIC0xLjAsXG4gICAgICAgIC0xLjAsICsxLjAsICsxLjAsXG4gICAgICAgICsxLjAsICsxLjAsICsxLjAsXG4gICAgICAgICsxLjAsICsxLjAsIC0xLjAsXG5cbiAgICAgICAgLTEuMCwgLTEuMCwgLTEuMCxcbiAgICAgICAgKzEuMCwgLTEuMCwgLTEuMCxcbiAgICAgICAgKzEuMCwgLTEuMCwgKzEuMCxcbiAgICAgICAgLTEuMCwgLTEuMCwgKzEuMCxcblxuICAgICAgICArMS4wLCAtMS4wLCAtMS4wLFxuICAgICAgICArMS4wLCArMS4wLCAtMS4wLFxuICAgICAgICArMS4wLCArMS4wLCArMS4wLFxuICAgICAgICArMS4wLCAtMS4wLCArMS4wLFxuXG4gICAgICAgIC0xLjAsIC0xLjAsIC0xLjAsXG4gICAgICAgIC0xLjAsIC0xLjAsICsxLjAsXG4gICAgICAgIC0xLjAsICsxLjAsICsxLjAsXG4gICAgICAgIC0xLjAsICsxLjAsIC0xLjBcbiAgICAgIF0sXG4gICAgICB2ZXJ0ZXhOb3JtYWxEYXRhID0gW1xuICAgICAgICAwLjAsICAwLjAsICsxLjAsXG4gICAgICAgIDAuMCwgIDAuMCwgKzEuMCxcbiAgICAgICAgMC4wLCAgMC4wLCArMS4wLFxuICAgICAgICAwLjAsICAwLjAsICsxLjAsXG5cbiAgICAgICAgMC4wLCAgMC4wLCAtMS4wLFxuICAgICAgICAwLjAsICAwLjAsIC0xLjAsXG4gICAgICAgIDAuMCwgIDAuMCwgLTEuMCxcbiAgICAgICAgMC4wLCAgMC4wLCAtMS4wLFxuXG4gICAgICAgIDAuMCwgKzEuMCwgIDAuMCxcbiAgICAgICAgMC4wLCArMS4wLCAgMC4wLFxuICAgICAgICAwLjAsICsxLjAsICAwLjAsXG4gICAgICAgIDAuMCwgKzEuMCwgIDAuMCxcblxuICAgICAgICAwLjAsIC0xLjAsICAwLjAsXG4gICAgICAgIDAuMCwgLTEuMCwgIDAuMCxcbiAgICAgICAgMC4wLCAtMS4wLCAgMC4wLFxuICAgICAgICAwLjAsIC0xLjAsICAwLjAsXG5cbiAgICAgICAgKzEuMCwgIDAuMCwgIDAuMCxcbiAgICAgICAgKzEuMCwgIDAuMCwgIDAuMCxcbiAgICAgICAgKzEuMCwgIDAuMCwgIDAuMCxcbiAgICAgICAgKzEuMCwgIDAuMCwgIDAuMCxcblxuICAgICAgICAtMS4wLCAgMC4wLCAgMC4wLFxuICAgICAgICAtMS4wLCAgMC4wLCAgMC4wLFxuICAgICAgICAtMS4wLCAgMC4wLCAgMC4wLFxuICAgICAgICAtMS4wLCAgMC4wLCAgMC4wXG4gICAgICBdLFxuICAgICAgdmVydGV4SW5kZXhEYXRhID0gW1xuICAgICAgICAwLCAgMSwgIDIsXG4gICAgICAgIDAsICAyLCAgMyxcblxuICAgICAgICA0LCAgNSwgIDYsXG4gICAgICAgIDQsICA2LCAgNyxcblxuICAgICAgICA4LCAgOSwgMTAsXG4gICAgICAgIDgsIDEwLCAxMSxcblxuICAgICAgICAxMiwgMTMsIDE0LFxuICAgICAgICAxMiwgMTQsIDE1LFxuXG4gICAgICAgIDE2LCAxNywgMTgsXG4gICAgICAgIDE2LCAxOCwgMTksXG5cbiAgICAgICAgMjAsIDIxLCAyMixcbiAgICAgICAgMjAsIDIyLCAyM1xuICAgICAgXTtcblxuY29uc3QgdGV4dHVyZUN1YmUgPSAob2Zmc2V0UG9zaXRpb24sIGltYWdlLCBjYW52YXMsIGNhbGxiYWNrKSA9PiB7XG4gIGNvbnN0IHRleHR1cmVTaGFkZXIgPSBUZXh0dXJlU2hhZGVyLmZyb21Ob3RoaW5nKGNhbnZhcyksXG4gICAgICAgIHZlcnRleFBvc2l0aW9ucyA9IGRpdmlkZSh2ZXJ0ZXhQb3NpdGlvbkRhdGEsIDMpLCAgLy8vXG4gICAgICAgIG9mZnNldFZlcnRleFBvc2l0aW9ucyA9IHZlcnRleFBvc2l0aW9ucy5tYXAoZnVuY3Rpb24odmVydGV4UG9zaXRpb24pIHtcbiAgICAgICAgICBjb25zdCBvZmZzZXRWZXJ0ZXhQb3NpdGlvbiA9IHZlYzMuYWRkKHZlcnRleFBvc2l0aW9uLCBvZmZzZXRQb3NpdGlvbik7XG5cbiAgICAgICAgICByZXR1cm4gb2Zmc2V0VmVydGV4UG9zaXRpb247XG4gICAgICAgIH0pLFxuICAgICAgICBvZmZzZXRWZXJ0ZXhQb3NpdGlvbkRhdGEgPSBmbGF0dGVuKG9mZnNldFZlcnRleFBvc2l0aW9ucyk7XG5cbiAgdGV4dHVyZVNoYWRlci5jcmVhdGVBbmRCaW5kVmVydGV4UG9zaXRpb25CdWZmZXIob2Zmc2V0VmVydGV4UG9zaXRpb25EYXRhLCBjYW52YXMpO1xuXG4gIHRleHR1cmVTaGFkZXIuY3JlYXRlQW5kQmluZFRleHR1cmVDb29yZGluYXRlQnVmZmVyKHRleHR1cmVDb29yZGluYXRlRGF0YSwgY2FudmFzKTtcblxuICB0ZXh0dXJlU2hhZGVyLmNyZWF0ZUFuZEJpbmRWZXJ0ZXhOb3JtYWxCdWZmZXIodmVydGV4Tm9ybWFsRGF0YSwgY2FudmFzKTtcblxuICBjb25zdCBjb3VudCA9IGNhbnZhcy5jcmVhdGVBbmRCaW5kRWxlbWVudEJ1ZmZlcih2ZXJ0ZXhJbmRleERhdGEpLFxuICAgICAgICBzaGFkZXIgPSB0ZXh0dXJlU2hhZGVyOyAvLy9cbiAgXG4gIGNhbnZhcy51c2VTaGFkZXIoc2hhZGVyKTtcblxuICB0ZXh0dXJlU2hhZGVyLmNyZWF0ZUFuZEFjdGl2YXRlVGV4dHVyZShpbWFnZSwgY2FudmFzKTtcblxuICBjYWxsYmFjayhjb3VudCwgc2hhZGVyKTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gdGV4dHVyZUN1YmU7XG4iXX0=