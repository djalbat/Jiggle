'use strict';

var Canvas = require('../canvas'),
    App = require('./intermediate/app'),
    cubes = require('./intermediate/cubes'),
    ColourShader = require('../shader/colour'),
    TextureShader = require('../shader/texture');

var create = cubes.create;


var canvas = new Canvas();

canvas.enableDepthTesting();
canvas.enableDepthFunction();

function intermediate() {
  var colourShader = ColourShader.fromNothing(canvas),
      textureShader = TextureShader.fromNothing(canvas);

  create(colourShader, textureShader, canvas, function (counts) {
    var app = new App(counts, colourShader, textureShader, canvas);

    window.onresize = function () {
      app.resize();

      app.render(colourShader, textureShader);
    };

    app.resize();

    app.render(colourShader, textureShader);

    app.addMouseEventHandlers();
  });
}

module.exports = intermediate;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL2VzNi9leGFtcGxlcy9pbnRlcm1lZGlhdGUuanMiXSwibmFtZXMiOlsiQ2FudmFzIiwicmVxdWlyZSIsIkFwcCIsImN1YmVzIiwiQ29sb3VyU2hhZGVyIiwiVGV4dHVyZVNoYWRlciIsImNyZWF0ZSIsImNhbnZhcyIsImVuYWJsZURlcHRoVGVzdGluZyIsImVuYWJsZURlcHRoRnVuY3Rpb24iLCJpbnRlcm1lZGlhdGUiLCJjb2xvdXJTaGFkZXIiLCJmcm9tTm90aGluZyIsInRleHR1cmVTaGFkZXIiLCJjb3VudHMiLCJhcHAiLCJ3aW5kb3ciLCJvbnJlc2l6ZSIsInJlc2l6ZSIsInJlbmRlciIsImFkZE1vdXNlRXZlbnRIYW5kbGVycyIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBLElBQU1BLFNBQVNDLFFBQVEsV0FBUixDQUFmO0FBQUEsSUFDTUMsTUFBTUQsUUFBUSxvQkFBUixDQURaO0FBQUEsSUFFTUUsUUFBUUYsUUFBUSxzQkFBUixDQUZkO0FBQUEsSUFHTUcsZUFBZUgsUUFBUSxrQkFBUixDQUhyQjtBQUFBLElBSU1JLGdCQUFnQkosUUFBUSxtQkFBUixDQUp0Qjs7SUFNUUssTSxHQUFXSCxLLENBQVhHLE07OztBQUVSLElBQU1DLFNBQVMsSUFBSVAsTUFBSixFQUFmOztBQUVBTyxPQUFPQyxrQkFBUDtBQUNBRCxPQUFPRSxtQkFBUDs7QUFFQSxTQUFTQyxZQUFULEdBQXdCO0FBQ3RCLE1BQU1DLGVBQWVQLGFBQWFRLFdBQWIsQ0FBeUJMLE1BQXpCLENBQXJCO0FBQUEsTUFDTU0sZ0JBQWdCUixjQUFjTyxXQUFkLENBQTBCTCxNQUExQixDQUR0Qjs7QUFHQUQsU0FBT0ssWUFBUCxFQUFxQkUsYUFBckIsRUFBb0NOLE1BQXBDLEVBQTRDLFVBQVNPLE1BQVQsRUFBaUI7QUFDM0QsUUFBTUMsTUFBTSxJQUFJYixHQUFKLENBQVFZLE1BQVIsRUFBZ0JILFlBQWhCLEVBQThCRSxhQUE5QixFQUE2Q04sTUFBN0MsQ0FBWjs7QUFFQVMsV0FBT0MsUUFBUCxHQUFrQixZQUFXO0FBQzNCRixVQUFJRyxNQUFKOztBQUVBSCxVQUFJSSxNQUFKLENBQVdSLFlBQVgsRUFBeUJFLGFBQXpCO0FBQ0QsS0FKRDs7QUFNQUUsUUFBSUcsTUFBSjs7QUFFQUgsUUFBSUksTUFBSixDQUFXUixZQUFYLEVBQXlCRSxhQUF6Qjs7QUFFQUUsUUFBSUsscUJBQUo7QUFDRCxHQWREO0FBZUQ7O0FBRURDLE9BQU9DLE9BQVAsR0FBaUJaLFlBQWpCIiwiZmlsZSI6ImludGVybWVkaWF0ZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuY29uc3QgQ2FudmFzID0gcmVxdWlyZSgnLi4vY2FudmFzJyksXG4gICAgICBBcHAgPSByZXF1aXJlKCcuL2ludGVybWVkaWF0ZS9hcHAnKSxcbiAgICAgIGN1YmVzID0gcmVxdWlyZSgnLi9pbnRlcm1lZGlhdGUvY3ViZXMnKSxcbiAgICAgIENvbG91clNoYWRlciA9IHJlcXVpcmUoJy4uL3NoYWRlci9jb2xvdXInKSxcbiAgICAgIFRleHR1cmVTaGFkZXIgPSByZXF1aXJlKCcuLi9zaGFkZXIvdGV4dHVyZScpO1xuXG5jb25zdCB7IGNyZWF0ZSB9ID0gY3ViZXM7XG5cbmNvbnN0IGNhbnZhcyA9IG5ldyBDYW52YXMoKTtcblxuY2FudmFzLmVuYWJsZURlcHRoVGVzdGluZygpO1xuY2FudmFzLmVuYWJsZURlcHRoRnVuY3Rpb24oKTtcblxuZnVuY3Rpb24gaW50ZXJtZWRpYXRlKCkge1xuICBjb25zdCBjb2xvdXJTaGFkZXIgPSBDb2xvdXJTaGFkZXIuZnJvbU5vdGhpbmcoY2FudmFzKSxcbiAgICAgICAgdGV4dHVyZVNoYWRlciA9IFRleHR1cmVTaGFkZXIuZnJvbU5vdGhpbmcoY2FudmFzKTtcblxuICBjcmVhdGUoY29sb3VyU2hhZGVyLCB0ZXh0dXJlU2hhZGVyLCBjYW52YXMsIGZ1bmN0aW9uKGNvdW50cykge1xuICAgIGNvbnN0IGFwcCA9IG5ldyBBcHAoY291bnRzLCBjb2xvdXJTaGFkZXIsIHRleHR1cmVTaGFkZXIsIGNhbnZhcyk7XG5cbiAgICB3aW5kb3cub25yZXNpemUgPSBmdW5jdGlvbigpIHtcbiAgICAgIGFwcC5yZXNpemUoKTtcblxuICAgICAgYXBwLnJlbmRlcihjb2xvdXJTaGFkZXIsIHRleHR1cmVTaGFkZXIpO1xuICAgIH07XG5cbiAgICBhcHAucmVzaXplKCk7XG5cbiAgICBhcHAucmVuZGVyKGNvbG91clNoYWRlciwgdGV4dHVyZVNoYWRlcik7XG5cbiAgICBhcHAuYWRkTW91c2VFdmVudEhhbmRsZXJzKCk7XG4gIH0pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGludGVybWVkaWF0ZTtcbiJdfQ==