'use strict';

var Canvas = require('../canvas'),
    App = require('./intermediate/app'),
    cubes = require('./intermediate/cubes'),
    ColourShader = require('../shader/colour'),
    TextureShader = require('../shader/texture');

var create = cubes.create;


function intermediate() {
  var canvas = new Canvas(),
      colourShader = ColourShader.fromNothing(canvas),
      textureShader = TextureShader.fromNothing(canvas);

  canvas.enableDepthTesting();
  canvas.enableDepthFunction();

  create(colourShader, textureShader, canvas, function (cubes) {
    var app = new App(cubes, colourShader, textureShader, canvas);

    window.onresize = function () {
      app.resize();

      app.render(colourShader, textureShader);
    };

    app.resize();

    app.render(colourShader, textureShader);

    app.addMouseEventHandlers();
  });
}

module.exports = intermediate;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL2VzNi9leGFtcGxlcy9pbnRlcm1lZGlhdGUuanMiXSwibmFtZXMiOlsiQ2FudmFzIiwicmVxdWlyZSIsIkFwcCIsImN1YmVzIiwiQ29sb3VyU2hhZGVyIiwiVGV4dHVyZVNoYWRlciIsImNyZWF0ZSIsImludGVybWVkaWF0ZSIsImNhbnZhcyIsImNvbG91clNoYWRlciIsImZyb21Ob3RoaW5nIiwidGV4dHVyZVNoYWRlciIsImVuYWJsZURlcHRoVGVzdGluZyIsImVuYWJsZURlcHRoRnVuY3Rpb24iLCJhcHAiLCJ3aW5kb3ciLCJvbnJlc2l6ZSIsInJlc2l6ZSIsInJlbmRlciIsImFkZE1vdXNlRXZlbnRIYW5kbGVycyIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBLElBQU1BLFNBQVNDLFFBQVEsV0FBUixDQUFmO0FBQUEsSUFDTUMsTUFBTUQsUUFBUSxvQkFBUixDQURaO0FBQUEsSUFFTUUsUUFBUUYsUUFBUSxzQkFBUixDQUZkO0FBQUEsSUFHTUcsZUFBZUgsUUFBUSxrQkFBUixDQUhyQjtBQUFBLElBSU1JLGdCQUFnQkosUUFBUSxtQkFBUixDQUp0Qjs7SUFNUUssTSxHQUFXSCxLLENBQVhHLE07OztBQUVSLFNBQVNDLFlBQVQsR0FBd0I7QUFDdEIsTUFBTUMsU0FBUyxJQUFJUixNQUFKLEVBQWY7QUFBQSxNQUNNUyxlQUFlTCxhQUFhTSxXQUFiLENBQXlCRixNQUF6QixDQURyQjtBQUFBLE1BRU1HLGdCQUFnQk4sY0FBY0ssV0FBZCxDQUEwQkYsTUFBMUIsQ0FGdEI7O0FBSUFBLFNBQU9JLGtCQUFQO0FBQ0FKLFNBQU9LLG1CQUFQOztBQUVBUCxTQUFPRyxZQUFQLEVBQXFCRSxhQUFyQixFQUFvQ0gsTUFBcEMsRUFBNEMsVUFBU0wsS0FBVCxFQUFnQjtBQUMxRCxRQUFNVyxNQUFNLElBQUlaLEdBQUosQ0FBUUMsS0FBUixFQUFlTSxZQUFmLEVBQTZCRSxhQUE3QixFQUE0Q0gsTUFBNUMsQ0FBWjs7QUFFQU8sV0FBT0MsUUFBUCxHQUFrQixZQUFXO0FBQzNCRixVQUFJRyxNQUFKOztBQUVBSCxVQUFJSSxNQUFKLENBQVdULFlBQVgsRUFBeUJFLGFBQXpCO0FBQ0QsS0FKRDs7QUFNQUcsUUFBSUcsTUFBSjs7QUFFQUgsUUFBSUksTUFBSixDQUFXVCxZQUFYLEVBQXlCRSxhQUF6Qjs7QUFFQUcsUUFBSUsscUJBQUo7QUFDRCxHQWREO0FBZUQ7O0FBRURDLE9BQU9DLE9BQVAsR0FBaUJkLFlBQWpCIiwiZmlsZSI6ImludGVybWVkaWF0ZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuY29uc3QgQ2FudmFzID0gcmVxdWlyZSgnLi4vY2FudmFzJyksXG4gICAgICBBcHAgPSByZXF1aXJlKCcuL2ludGVybWVkaWF0ZS9hcHAnKSxcbiAgICAgIGN1YmVzID0gcmVxdWlyZSgnLi9pbnRlcm1lZGlhdGUvY3ViZXMnKSxcbiAgICAgIENvbG91clNoYWRlciA9IHJlcXVpcmUoJy4uL3NoYWRlci9jb2xvdXInKSxcbiAgICAgIFRleHR1cmVTaGFkZXIgPSByZXF1aXJlKCcuLi9zaGFkZXIvdGV4dHVyZScpO1xuXG5jb25zdCB7IGNyZWF0ZSB9ID0gY3ViZXM7XG5cbmZ1bmN0aW9uIGludGVybWVkaWF0ZSgpIHtcbiAgY29uc3QgY2FudmFzID0gbmV3IENhbnZhcygpLFxuICAgICAgICBjb2xvdXJTaGFkZXIgPSBDb2xvdXJTaGFkZXIuZnJvbU5vdGhpbmcoY2FudmFzKSxcbiAgICAgICAgdGV4dHVyZVNoYWRlciA9IFRleHR1cmVTaGFkZXIuZnJvbU5vdGhpbmcoY2FudmFzKTtcblxuICBjYW52YXMuZW5hYmxlRGVwdGhUZXN0aW5nKCk7XG4gIGNhbnZhcy5lbmFibGVEZXB0aEZ1bmN0aW9uKCk7XG5cbiAgY3JlYXRlKGNvbG91clNoYWRlciwgdGV4dHVyZVNoYWRlciwgY2FudmFzLCBmdW5jdGlvbihjdWJlcykge1xuICAgIGNvbnN0IGFwcCA9IG5ldyBBcHAoY3ViZXMsIGNvbG91clNoYWRlciwgdGV4dHVyZVNoYWRlciwgY2FudmFzKTtcblxuICAgIHdpbmRvdy5vbnJlc2l6ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgYXBwLnJlc2l6ZSgpO1xuXG4gICAgICBhcHAucmVuZGVyKGNvbG91clNoYWRlciwgdGV4dHVyZVNoYWRlcik7XG4gICAgfTtcblxuICAgIGFwcC5yZXNpemUoKTtcblxuICAgIGFwcC5yZW5kZXIoY29sb3VyU2hhZGVyLCB0ZXh0dXJlU2hhZGVyKTtcblxuICAgIGFwcC5hZGRNb3VzZUV2ZW50SGFuZGxlcnMoKTtcbiAgfSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaW50ZXJtZWRpYXRlO1xuIl19