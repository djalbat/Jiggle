'use strict';

var Canvas = require('../canvas'),
    App = require('./intermediate/app'),
    cubes = require('./intermediate/cubes'),
    ColourShader = require('../shader/colour'),
    TextureShader = require('../shader/texture');

var create = cubes.create;


var canvas = new Canvas();

canvas.enableDepthTesting();
canvas.enableDepthFunction();

function intermediate() {
  var colourShader = ColourShader.fromNothing(canvas),
      textureShader = TextureShader.fromNothing(canvas);

  create(colourShader, textureShader, canvas, function () {
    colourShader.createBuffers(canvas);
    textureShader.createBuffers(canvas);

    var app = new App(colourShader, textureShader, canvas);

    window.onresize = function () {
      app.resize();

      app.render(colourShader, textureShader);
    };

    app.resize();

    app.render(colourShader, textureShader);

    app.addMouseEventHandlers();
  });
}

module.exports = intermediate;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL2VzNi9leGFtcGxlcy9pbnRlcm1lZGlhdGUuanMiXSwibmFtZXMiOlsiQ2FudmFzIiwicmVxdWlyZSIsIkFwcCIsImN1YmVzIiwiQ29sb3VyU2hhZGVyIiwiVGV4dHVyZVNoYWRlciIsImNyZWF0ZSIsImNhbnZhcyIsImVuYWJsZURlcHRoVGVzdGluZyIsImVuYWJsZURlcHRoRnVuY3Rpb24iLCJpbnRlcm1lZGlhdGUiLCJjb2xvdXJTaGFkZXIiLCJmcm9tTm90aGluZyIsInRleHR1cmVTaGFkZXIiLCJjcmVhdGVCdWZmZXJzIiwiYXBwIiwid2luZG93Iiwib25yZXNpemUiLCJyZXNpemUiLCJyZW5kZXIiLCJhZGRNb3VzZUV2ZW50SGFuZGxlcnMiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQSxJQUFNQSxTQUFTQyxRQUFRLFdBQVIsQ0FBZjtBQUFBLElBQ01DLE1BQU1ELFFBQVEsb0JBQVIsQ0FEWjtBQUFBLElBRU1FLFFBQVFGLFFBQVEsc0JBQVIsQ0FGZDtBQUFBLElBR01HLGVBQWVILFFBQVEsa0JBQVIsQ0FIckI7QUFBQSxJQUlNSSxnQkFBZ0JKLFFBQVEsbUJBQVIsQ0FKdEI7O0lBTVFLLE0sR0FBV0gsSyxDQUFYRyxNOzs7QUFFUixJQUFNQyxTQUFTLElBQUlQLE1BQUosRUFBZjs7QUFFQU8sT0FBT0Msa0JBQVA7QUFDQUQsT0FBT0UsbUJBQVA7O0FBRUEsU0FBU0MsWUFBVCxHQUF3QjtBQUN0QixNQUFNQyxlQUFlUCxhQUFhUSxXQUFiLENBQXlCTCxNQUF6QixDQUFyQjtBQUFBLE1BQ01NLGdCQUFnQlIsY0FBY08sV0FBZCxDQUEwQkwsTUFBMUIsQ0FEdEI7O0FBR0FELFNBQU9LLFlBQVAsRUFBcUJFLGFBQXJCLEVBQW9DTixNQUFwQyxFQUE0QyxZQUFXO0FBQ3JESSxpQkFBYUcsYUFBYixDQUEyQlAsTUFBM0I7QUFDQU0sa0JBQWNDLGFBQWQsQ0FBNEJQLE1BQTVCOztBQUVBLFFBQU1RLE1BQU0sSUFBSWIsR0FBSixDQUFRUyxZQUFSLEVBQXNCRSxhQUF0QixFQUFxQ04sTUFBckMsQ0FBWjs7QUFFQVMsV0FBT0MsUUFBUCxHQUFrQixZQUFXO0FBQzNCRixVQUFJRyxNQUFKOztBQUVBSCxVQUFJSSxNQUFKLENBQVdSLFlBQVgsRUFBeUJFLGFBQXpCO0FBQ0QsS0FKRDs7QUFNQUUsUUFBSUcsTUFBSjs7QUFFQUgsUUFBSUksTUFBSixDQUFXUixZQUFYLEVBQXlCRSxhQUF6Qjs7QUFFQUUsUUFBSUsscUJBQUo7QUFDRCxHQWpCRDtBQWtCRDs7QUFFREMsT0FBT0MsT0FBUCxHQUFpQlosWUFBakIiLCJmaWxlIjoiaW50ZXJtZWRpYXRlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBDYW52YXMgPSByZXF1aXJlKCcuLi9jYW52YXMnKSxcbiAgICAgIEFwcCA9IHJlcXVpcmUoJy4vaW50ZXJtZWRpYXRlL2FwcCcpLFxuICAgICAgY3ViZXMgPSByZXF1aXJlKCcuL2ludGVybWVkaWF0ZS9jdWJlcycpLFxuICAgICAgQ29sb3VyU2hhZGVyID0gcmVxdWlyZSgnLi4vc2hhZGVyL2NvbG91cicpLFxuICAgICAgVGV4dHVyZVNoYWRlciA9IHJlcXVpcmUoJy4uL3NoYWRlci90ZXh0dXJlJyk7XG5cbmNvbnN0IHsgY3JlYXRlIH0gPSBjdWJlcztcblxuY29uc3QgY2FudmFzID0gbmV3IENhbnZhcygpO1xuXG5jYW52YXMuZW5hYmxlRGVwdGhUZXN0aW5nKCk7XG5jYW52YXMuZW5hYmxlRGVwdGhGdW5jdGlvbigpO1xuXG5mdW5jdGlvbiBpbnRlcm1lZGlhdGUoKSB7XG4gIGNvbnN0IGNvbG91clNoYWRlciA9IENvbG91clNoYWRlci5mcm9tTm90aGluZyhjYW52YXMpLFxuICAgICAgICB0ZXh0dXJlU2hhZGVyID0gVGV4dHVyZVNoYWRlci5mcm9tTm90aGluZyhjYW52YXMpO1xuXG4gIGNyZWF0ZShjb2xvdXJTaGFkZXIsIHRleHR1cmVTaGFkZXIsIGNhbnZhcywgZnVuY3Rpb24oKSB7XG4gICAgY29sb3VyU2hhZGVyLmNyZWF0ZUJ1ZmZlcnMoY2FudmFzKTtcbiAgICB0ZXh0dXJlU2hhZGVyLmNyZWF0ZUJ1ZmZlcnMoY2FudmFzKTtcblxuICAgIGNvbnN0IGFwcCA9IG5ldyBBcHAoY29sb3VyU2hhZGVyLCB0ZXh0dXJlU2hhZGVyLCBjYW52YXMpO1xuXG4gICAgd2luZG93Lm9ucmVzaXplID0gZnVuY3Rpb24oKSB7XG4gICAgICBhcHAucmVzaXplKCk7XG5cbiAgICAgIGFwcC5yZW5kZXIoY29sb3VyU2hhZGVyLCB0ZXh0dXJlU2hhZGVyKTtcbiAgICB9O1xuXG4gICAgYXBwLnJlc2l6ZSgpO1xuXG4gICAgYXBwLnJlbmRlcihjb2xvdXJTaGFkZXIsIHRleHR1cmVTaGFkZXIpO1xuXG4gICAgYXBwLmFkZE1vdXNlRXZlbnRIYW5kbGVycygpO1xuICB9KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpbnRlcm1lZGlhdGU7XG4iXX0=