'use strict';

var Canvas = require('../canvas'),
    App = require('./intermediate/app'),
    cubes = require('./intermediate/cubes'),
    ColourShader = require('../shader/colour'),
    TextureShader = require('../shader/texture');

var create = cubes.create;


var canvas = new Canvas();

canvas.enableDepthTesting();
canvas.enableDepthFunction();

function intermediate() {
  var colourShader = ColourShader.fromNothing(canvas),
      textureShader = TextureShader.fromNothing(canvas);

  create(colourShader, textureShader, canvas, function (cubes) {
    var app = new App(cubes, colourShader, textureShader, canvas);

    window.onresize = function () {
      app.resize();

      app.render(colourShader, textureShader);
    };

    app.resize();

    app.render(colourShader, textureShader);

    app.addMouseEventHandlers();
  });
}

module.exports = intermediate;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL2VzNi9leGFtcGxlcy9pbnRlcm1lZGlhdGUuanMiXSwibmFtZXMiOlsiQ2FudmFzIiwicmVxdWlyZSIsIkFwcCIsImN1YmVzIiwiQ29sb3VyU2hhZGVyIiwiVGV4dHVyZVNoYWRlciIsImNyZWF0ZSIsImNhbnZhcyIsImVuYWJsZURlcHRoVGVzdGluZyIsImVuYWJsZURlcHRoRnVuY3Rpb24iLCJpbnRlcm1lZGlhdGUiLCJjb2xvdXJTaGFkZXIiLCJmcm9tTm90aGluZyIsInRleHR1cmVTaGFkZXIiLCJhcHAiLCJ3aW5kb3ciLCJvbnJlc2l6ZSIsInJlc2l6ZSIsInJlbmRlciIsImFkZE1vdXNlRXZlbnRIYW5kbGVycyIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBLElBQU1BLFNBQVNDLFFBQVEsV0FBUixDQUFmO0FBQUEsSUFDTUMsTUFBTUQsUUFBUSxvQkFBUixDQURaO0FBQUEsSUFFTUUsUUFBUUYsUUFBUSxzQkFBUixDQUZkO0FBQUEsSUFHTUcsZUFBZUgsUUFBUSxrQkFBUixDQUhyQjtBQUFBLElBSU1JLGdCQUFnQkosUUFBUSxtQkFBUixDQUp0Qjs7SUFNUUssTSxHQUFXSCxLLENBQVhHLE07OztBQUVSLElBQU1DLFNBQVMsSUFBSVAsTUFBSixFQUFmOztBQUVBTyxPQUFPQyxrQkFBUDtBQUNBRCxPQUFPRSxtQkFBUDs7QUFFQSxTQUFTQyxZQUFULEdBQXdCO0FBQ3RCLE1BQU1DLGVBQWVQLGFBQWFRLFdBQWIsQ0FBeUJMLE1BQXpCLENBQXJCO0FBQUEsTUFDTU0sZ0JBQWdCUixjQUFjTyxXQUFkLENBQTBCTCxNQUExQixDQUR0Qjs7QUFHQUQsU0FBT0ssWUFBUCxFQUFxQkUsYUFBckIsRUFBb0NOLE1BQXBDLEVBQTRDLFVBQVNKLEtBQVQsRUFBZ0I7QUFDMUQsUUFBTVcsTUFBTSxJQUFJWixHQUFKLENBQVFDLEtBQVIsRUFBZVEsWUFBZixFQUE2QkUsYUFBN0IsRUFBNENOLE1BQTVDLENBQVo7O0FBRUFRLFdBQU9DLFFBQVAsR0FBa0IsWUFBVztBQUMzQkYsVUFBSUcsTUFBSjs7QUFFQUgsVUFBSUksTUFBSixDQUFXUCxZQUFYLEVBQXlCRSxhQUF6QjtBQUNELEtBSkQ7O0FBTUFDLFFBQUlHLE1BQUo7O0FBRUFILFFBQUlJLE1BQUosQ0FBV1AsWUFBWCxFQUF5QkUsYUFBekI7O0FBRUFDLFFBQUlLLHFCQUFKO0FBQ0QsR0FkRDtBQWVEOztBQUVEQyxPQUFPQyxPQUFQLEdBQWlCWCxZQUFqQiIsImZpbGUiOiJpbnRlcm1lZGlhdGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmNvbnN0IENhbnZhcyA9IHJlcXVpcmUoJy4uL2NhbnZhcycpLFxuICAgICAgQXBwID0gcmVxdWlyZSgnLi9pbnRlcm1lZGlhdGUvYXBwJyksXG4gICAgICBjdWJlcyA9IHJlcXVpcmUoJy4vaW50ZXJtZWRpYXRlL2N1YmVzJyksXG4gICAgICBDb2xvdXJTaGFkZXIgPSByZXF1aXJlKCcuLi9zaGFkZXIvY29sb3VyJyksXG4gICAgICBUZXh0dXJlU2hhZGVyID0gcmVxdWlyZSgnLi4vc2hhZGVyL3RleHR1cmUnKTtcblxuY29uc3QgeyBjcmVhdGUgfSA9IGN1YmVzO1xuXG5jb25zdCBjYW52YXMgPSBuZXcgQ2FudmFzKCk7XG5cbmNhbnZhcy5lbmFibGVEZXB0aFRlc3RpbmcoKTtcbmNhbnZhcy5lbmFibGVEZXB0aEZ1bmN0aW9uKCk7XG5cbmZ1bmN0aW9uIGludGVybWVkaWF0ZSgpIHtcbiAgY29uc3QgY29sb3VyU2hhZGVyID0gQ29sb3VyU2hhZGVyLmZyb21Ob3RoaW5nKGNhbnZhcyksXG4gICAgICAgIHRleHR1cmVTaGFkZXIgPSBUZXh0dXJlU2hhZGVyLmZyb21Ob3RoaW5nKGNhbnZhcyk7XG5cbiAgY3JlYXRlKGNvbG91clNoYWRlciwgdGV4dHVyZVNoYWRlciwgY2FudmFzLCBmdW5jdGlvbihjdWJlcykge1xuICAgIGNvbnN0IGFwcCA9IG5ldyBBcHAoY3ViZXMsIGNvbG91clNoYWRlciwgdGV4dHVyZVNoYWRlciwgY2FudmFzKTtcblxuICAgIHdpbmRvdy5vbnJlc2l6ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgYXBwLnJlc2l6ZSgpO1xuXG4gICAgICBhcHAucmVuZGVyKGNvbG91clNoYWRlciwgdGV4dHVyZVNoYWRlcik7XG4gICAgfTtcblxuICAgIGFwcC5yZXNpemUoKTtcblxuICAgIGFwcC5yZW5kZXIoY29sb3VyU2hhZGVyLCB0ZXh0dXJlU2hhZGVyKTtcblxuICAgIGFwcC5hZGRNb3VzZUV2ZW50SGFuZGxlcnMoKTtcbiAgfSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaW50ZXJtZWRpYXRlO1xuIl19