'use strict';

var Canvas = require('../canvas'),
    App = require('./intermediate/app'),
    cubes = require('./intermediate/cubes'),
    ColourShader = require('../shader/colour'),
    TextureShader = require('../shader/texture');

var create = cubes.create;


var canvas = new Canvas();

canvas.enableDepthTesting();
canvas.enableDepthFunction();

function intermediate() {
  var colourShader = ColourShader.fromNothing(canvas),
      textureShader = TextureShader.fromNothing(canvas);

  create(colourShader, textureShader, canvas, function () {
    var app = new App(colourShader, textureShader, canvas);

    window.onresize = function () {
      app.resize();

      app.render(colourShader, textureShader);
    };

    app.resize();

    app.render(colourShader, textureShader);

    app.addMouseEventHandlers();
  });
}

module.exports = intermediate;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL2VzNi9leGFtcGxlcy9pbnRlcm1lZGlhdGUuanMiXSwibmFtZXMiOlsiQ2FudmFzIiwicmVxdWlyZSIsIkFwcCIsImN1YmVzIiwiQ29sb3VyU2hhZGVyIiwiVGV4dHVyZVNoYWRlciIsImNyZWF0ZSIsImNhbnZhcyIsImVuYWJsZURlcHRoVGVzdGluZyIsImVuYWJsZURlcHRoRnVuY3Rpb24iLCJpbnRlcm1lZGlhdGUiLCJjb2xvdXJTaGFkZXIiLCJmcm9tTm90aGluZyIsInRleHR1cmVTaGFkZXIiLCJhcHAiLCJ3aW5kb3ciLCJvbnJlc2l6ZSIsInJlc2l6ZSIsInJlbmRlciIsImFkZE1vdXNlRXZlbnRIYW5kbGVycyIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBLElBQU1BLFNBQVNDLFFBQVEsV0FBUixDQUFmO0FBQUEsSUFDTUMsTUFBTUQsUUFBUSxvQkFBUixDQURaO0FBQUEsSUFFTUUsUUFBUUYsUUFBUSxzQkFBUixDQUZkO0FBQUEsSUFHTUcsZUFBZUgsUUFBUSxrQkFBUixDQUhyQjtBQUFBLElBSU1JLGdCQUFnQkosUUFBUSxtQkFBUixDQUp0Qjs7SUFNUUssTSxHQUFXSCxLLENBQVhHLE07OztBQUVSLElBQU1DLFNBQVMsSUFBSVAsTUFBSixFQUFmOztBQUVBTyxPQUFPQyxrQkFBUDtBQUNBRCxPQUFPRSxtQkFBUDs7QUFFQSxTQUFTQyxZQUFULEdBQXdCO0FBQ3RCLE1BQU1DLGVBQWVQLGFBQWFRLFdBQWIsQ0FBeUJMLE1BQXpCLENBQXJCO0FBQUEsTUFDTU0sZ0JBQWdCUixjQUFjTyxXQUFkLENBQTBCTCxNQUExQixDQUR0Qjs7QUFHQUQsU0FBT0ssWUFBUCxFQUFxQkUsYUFBckIsRUFBb0NOLE1BQXBDLEVBQTRDLFlBQVc7QUFDckQsUUFBTU8sTUFBTSxJQUFJWixHQUFKLENBQVFTLFlBQVIsRUFBc0JFLGFBQXRCLEVBQXFDTixNQUFyQyxDQUFaOztBQUVBUSxXQUFPQyxRQUFQLEdBQWtCLFlBQVc7QUFDM0JGLFVBQUlHLE1BQUo7O0FBRUFILFVBQUlJLE1BQUosQ0FBV1AsWUFBWCxFQUF5QkUsYUFBekI7QUFDRCxLQUpEOztBQU1BQyxRQUFJRyxNQUFKOztBQUVBSCxRQUFJSSxNQUFKLENBQVdQLFlBQVgsRUFBeUJFLGFBQXpCOztBQUVBQyxRQUFJSyxxQkFBSjtBQUNELEdBZEQ7QUFlRDs7QUFFREMsT0FBT0MsT0FBUCxHQUFpQlgsWUFBakIiLCJmaWxlIjoiaW50ZXJtZWRpYXRlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBDYW52YXMgPSByZXF1aXJlKCcuLi9jYW52YXMnKSxcbiAgICAgIEFwcCA9IHJlcXVpcmUoJy4vaW50ZXJtZWRpYXRlL2FwcCcpLFxuICAgICAgY3ViZXMgPSByZXF1aXJlKCcuL2ludGVybWVkaWF0ZS9jdWJlcycpLFxuICAgICAgQ29sb3VyU2hhZGVyID0gcmVxdWlyZSgnLi4vc2hhZGVyL2NvbG91cicpLFxuICAgICAgVGV4dHVyZVNoYWRlciA9IHJlcXVpcmUoJy4uL3NoYWRlci90ZXh0dXJlJyk7XG5cbmNvbnN0IHsgY3JlYXRlIH0gPSBjdWJlcztcblxuY29uc3QgY2FudmFzID0gbmV3IENhbnZhcygpO1xuXG5jYW52YXMuZW5hYmxlRGVwdGhUZXN0aW5nKCk7XG5jYW52YXMuZW5hYmxlRGVwdGhGdW5jdGlvbigpO1xuXG5mdW5jdGlvbiBpbnRlcm1lZGlhdGUoKSB7XG4gIGNvbnN0IGNvbG91clNoYWRlciA9IENvbG91clNoYWRlci5mcm9tTm90aGluZyhjYW52YXMpLFxuICAgICAgICB0ZXh0dXJlU2hhZGVyID0gVGV4dHVyZVNoYWRlci5mcm9tTm90aGluZyhjYW52YXMpO1xuXG4gIGNyZWF0ZShjb2xvdXJTaGFkZXIsIHRleHR1cmVTaGFkZXIsIGNhbnZhcywgZnVuY3Rpb24oKSB7XG4gICAgY29uc3QgYXBwID0gbmV3IEFwcChjb2xvdXJTaGFkZXIsIHRleHR1cmVTaGFkZXIsIGNhbnZhcyk7XG5cbiAgICB3aW5kb3cub25yZXNpemUgPSBmdW5jdGlvbigpIHtcbiAgICAgIGFwcC5yZXNpemUoKTtcblxuICAgICAgYXBwLnJlbmRlcihjb2xvdXJTaGFkZXIsIHRleHR1cmVTaGFkZXIpO1xuICAgIH07XG5cbiAgICBhcHAucmVzaXplKCk7XG5cbiAgICBhcHAucmVuZGVyKGNvbG91clNoYWRlciwgdGV4dHVyZVNoYWRlcik7XG5cbiAgICBhcHAuYWRkTW91c2VFdmVudEhhbmRsZXJzKCk7XG4gIH0pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGludGVybWVkaWF0ZTtcbiJdfQ==