'use strict';

var Scene = require('./scene'),
    Canvas = require('./canvas'),
    ColourShader = require('./shader/colour'),
    TextureShader = require('./shader/texture'),
    imageMapUtilities = require('./utilities/imageMap');

var preloadImageMap = imageMapUtilities.preloadImageMap;


function example(callback) {
  var canvas = new Canvas(),
      colourShader = ColourShader.fromNothing(canvas),
      textureShader = TextureShader.fromNothing(canvas);

  preloadImageMap(canvas, textureShader, function () {
    var elements = callback();

    elements.forEach(function (element) {
      element.create(colourShader, textureShader);
    });

    canvas.enableDepthTesting();
    canvas.enableDepthFunction();

    colourShader.createBuffers(canvas);
    textureShader.createBuffers(canvas);

    Scene.fromCanvasAndShaders(canvas, colourShader, textureShader);
  });
}

module.exports = example;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL2VzNi9leGFtcGxlLmpzIl0sIm5hbWVzIjpbIlNjZW5lIiwicmVxdWlyZSIsIkNhbnZhcyIsIkNvbG91clNoYWRlciIsIlRleHR1cmVTaGFkZXIiLCJpbWFnZU1hcFV0aWxpdGllcyIsInByZWxvYWRJbWFnZU1hcCIsImV4YW1wbGUiLCJjYWxsYmFjayIsImNhbnZhcyIsImNvbG91clNoYWRlciIsImZyb21Ob3RoaW5nIiwidGV4dHVyZVNoYWRlciIsImVsZW1lbnRzIiwiZm9yRWFjaCIsImVsZW1lbnQiLCJjcmVhdGUiLCJlbmFibGVEZXB0aFRlc3RpbmciLCJlbmFibGVEZXB0aEZ1bmN0aW9uIiwiY3JlYXRlQnVmZmVycyIsImZyb21DYW52YXNBbmRTaGFkZXJzIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUEsSUFBTUEsUUFBUUMsUUFBUSxTQUFSLENBQWQ7QUFBQSxJQUNNQyxTQUFTRCxRQUFRLFVBQVIsQ0FEZjtBQUFBLElBRU1FLGVBQWVGLFFBQVEsaUJBQVIsQ0FGckI7QUFBQSxJQUdNRyxnQkFBZ0JILFFBQVEsa0JBQVIsQ0FIdEI7QUFBQSxJQUlNSSxvQkFBb0JKLFFBQVEsc0JBQVIsQ0FKMUI7O0lBTVFLLGUsR0FBb0JELGlCLENBQXBCQyxlOzs7QUFFUixTQUFTQyxPQUFULENBQWlCQyxRQUFqQixFQUEyQjtBQUN6QixNQUFNQyxTQUFTLElBQUlQLE1BQUosRUFBZjtBQUFBLE1BQ01RLGVBQWVQLGFBQWFRLFdBQWIsQ0FBeUJGLE1BQXpCLENBRHJCO0FBQUEsTUFFTUcsZ0JBQWdCUixjQUFjTyxXQUFkLENBQTBCRixNQUExQixDQUZ0Qjs7QUFJQUgsa0JBQWdCRyxNQUFoQixFQUF3QkcsYUFBeEIsRUFBdUMsWUFBVztBQUNoRCxRQUFNQyxXQUFXTCxVQUFqQjs7QUFFQUssYUFBU0MsT0FBVCxDQUFpQixVQUFTQyxPQUFULEVBQWtCO0FBQ2pDQSxjQUFRQyxNQUFSLENBQWVOLFlBQWYsRUFBNkJFLGFBQTdCO0FBQ0QsS0FGRDs7QUFJQUgsV0FBT1Esa0JBQVA7QUFDQVIsV0FBT1MsbUJBQVA7O0FBRUFSLGlCQUFhUyxhQUFiLENBQTJCVixNQUEzQjtBQUNBRyxrQkFBY08sYUFBZCxDQUE0QlYsTUFBNUI7O0FBRUFULFVBQU1vQixvQkFBTixDQUEyQlgsTUFBM0IsRUFBbUNDLFlBQW5DLEVBQWlERSxhQUFqRDtBQUNELEdBZEQ7QUFlRDs7QUFFRFMsT0FBT0MsT0FBUCxHQUFpQmYsT0FBakIiLCJmaWxlIjoiZXhhbXBsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuY29uc3QgU2NlbmUgPSByZXF1aXJlKCcuL3NjZW5lJyksXG4gICAgICBDYW52YXMgPSByZXF1aXJlKCcuL2NhbnZhcycpLFxuICAgICAgQ29sb3VyU2hhZGVyID0gcmVxdWlyZSgnLi9zaGFkZXIvY29sb3VyJyksXG4gICAgICBUZXh0dXJlU2hhZGVyID0gcmVxdWlyZSgnLi9zaGFkZXIvdGV4dHVyZScpLFxuICAgICAgaW1hZ2VNYXBVdGlsaXRpZXMgPSByZXF1aXJlKCcuL3V0aWxpdGllcy9pbWFnZU1hcCcpO1xuXG5jb25zdCB7IHByZWxvYWRJbWFnZU1hcCB9ID0gaW1hZ2VNYXBVdGlsaXRpZXM7XG5cbmZ1bmN0aW9uIGV4YW1wbGUoY2FsbGJhY2spIHtcbiAgY29uc3QgY2FudmFzID0gbmV3IENhbnZhcygpLFxuICAgICAgICBjb2xvdXJTaGFkZXIgPSBDb2xvdXJTaGFkZXIuZnJvbU5vdGhpbmcoY2FudmFzKSxcbiAgICAgICAgdGV4dHVyZVNoYWRlciA9IFRleHR1cmVTaGFkZXIuZnJvbU5vdGhpbmcoY2FudmFzKTtcblxuICBwcmVsb2FkSW1hZ2VNYXAoY2FudmFzLCB0ZXh0dXJlU2hhZGVyLCBmdW5jdGlvbigpIHtcbiAgICBjb25zdCBlbGVtZW50cyA9IGNhbGxiYWNrKCk7XG4gICAgXG4gICAgZWxlbWVudHMuZm9yRWFjaChmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgICBlbGVtZW50LmNyZWF0ZShjb2xvdXJTaGFkZXIsIHRleHR1cmVTaGFkZXIpO1xuICAgIH0pO1xuICAgIFxuICAgIGNhbnZhcy5lbmFibGVEZXB0aFRlc3RpbmcoKTtcbiAgICBjYW52YXMuZW5hYmxlRGVwdGhGdW5jdGlvbigpO1xuXG4gICAgY29sb3VyU2hhZGVyLmNyZWF0ZUJ1ZmZlcnMoY2FudmFzKTtcbiAgICB0ZXh0dXJlU2hhZGVyLmNyZWF0ZUJ1ZmZlcnMoY2FudmFzKTtcblxuICAgIFNjZW5lLmZyb21DYW52YXNBbmRTaGFkZXJzKGNhbnZhcywgY29sb3VyU2hhZGVyLCB0ZXh0dXJlU2hhZGVyKTtcbiAgfSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZXhhbXBsZTtcbiJdfQ==