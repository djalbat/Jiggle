'use strict';

var vectorMaths = require('../maths/vector'),
    arrayUtilities = require('../utilities/array'),
    approximateUtilities = require('../utilities/approximate');

var add3 = vectorMaths.add3,
    subtract3 = vectorMaths.subtract3,
    scale3 = vectorMaths.scale3,
    first = arrayUtilities.first,
    second = arrayUtilities.second,
    isApproximatelyEqualToZero = approximateUtilities.isApproximatelyEqualToZero;


function calculateIntersection(edge, firstPositionComponent) {
  var intersection = null;

  var edgeNonParallel = isEdgeNonParallel(edge);

  if (edgeNonParallel) {
    var edgeIntersection = calculateEdgeIntersection(edge, firstPositionComponent),
        edgeIntersectionNonTrivial = edgeIntersection > 0 && edgeIntersection < 1;

    if (edgeIntersectionNonTrivial) {
      intersection = edgeIntersection; ///
    }
  }

  return intersection;
}

function calculateIntermediateVertex(startVertex, endVertex, intersection, Vertex) {
  var startPosition = startVertex.getPosition(),
      endPosition = endVertex.getPosition(),
      extent = subtract3(endPosition, startPosition),
      offset = scale3(extent, intersection),
      position = add3(startPosition, offset),
      vertex = new Vertex(position),
      intermediateVertex = vertex; ///

  return intermediateVertex;
}

function calculateNonNullIntersections(intersections) {
  var nonNullIntersections = intersections.reduce(function (nonNullIntersections, intersection) {
    if (intersection !== null) {
      var nonNullIntersection = intersection; ///

      nonNullIntersections.push(nonNullIntersection);
    }

    return nonNullIntersections;
  }, []);

  return nonNullIntersections;
}

function calculateNullIntersectionIndex(intersections) {
  var nullIntersectionIndex = intersections.reduce(function (nullIntersectionIndex, intersection, index) {
    if (nullIntersectionIndex === null) {
      if (intersection === null) {
        nullIntersectionIndex = index;
      }
    }

    return nullIntersectionIndex;
  }, null);

  return nullIntersectionIndex;
}

function calculateNonNullIntersectionIndex(intersections) {
  var nullIntersectionIndex = intersections.reduce(function (nullIntersectionIndex, intersection, index) {
    if (nullIntersectionIndex === null) {
      if (intersection !== null) {
        nullIntersectionIndex = index;
      }
    }

    return nullIntersectionIndex;
  }, null);

  return nullIntersectionIndex;
}

module.exports = module.exports = {
  calculateIntersection: calculateIntersection,
  calculateIntermediateVertex: calculateIntermediateVertex,
  calculateNonNullIntersections: calculateNonNullIntersections,
  calculateNullIntersectionIndex: calculateNullIntersectionIndex,
  calculateNonNullIntersectionIndex: calculateNonNullIntersectionIndex
};

function isEdgeNonParallel(edge) {
  var edgeExtent = edge.getExtent(),
      edgeExtentComponents = edgeExtent,
      ///
  firstEdgeExtentComponent = first(edgeExtentComponents),
      secondEdgeExtentComponent = second(edgeExtentComponents),
      edgeAngleTangent = firstEdgeExtentComponent / secondEdgeExtentComponent,
      edgeAngleTangentApproximatelyEqualToZero = isApproximatelyEqualToZero(edgeAngleTangent),
      edgeParallel = edgeAngleTangentApproximatelyEqualToZero,
      ///
  edgeNonParallel = !edgeParallel;

  return edgeNonParallel;
}

function calculateEdgeIntersection(edge, firstPositionComponent) {
  var edgePosition = edge.getPosition(),
      edgeExtent = edge.getExtent(),
      edgePositionComponents = edgePosition,
      ///
  edgeExtentComponents = edgeExtent,
      ///
  firstEdgePositionComponent = first(edgePositionComponents),
      firstEdgeExtentComponent = first(edgeExtentComponents),
      edgeIntersection = (firstPositionComponent - firstEdgePositionComponent) / firstEdgeExtentComponent;

  return edgeIntersection;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL2VzNi91dGlsaXRpZXMvaW50ZXJzZWN0aW9uLmpzIl0sIm5hbWVzIjpbInZlY3Rvck1hdGhzIiwicmVxdWlyZSIsImFycmF5VXRpbGl0aWVzIiwiYXBwcm94aW1hdGVVdGlsaXRpZXMiLCJhZGQzIiwic3VidHJhY3QzIiwic2NhbGUzIiwiZmlyc3QiLCJzZWNvbmQiLCJpc0FwcHJveGltYXRlbHlFcXVhbFRvWmVybyIsImNhbGN1bGF0ZUludGVyc2VjdGlvbiIsImVkZ2UiLCJmaXJzdFBvc2l0aW9uQ29tcG9uZW50IiwiaW50ZXJzZWN0aW9uIiwiZWRnZU5vblBhcmFsbGVsIiwiaXNFZGdlTm9uUGFyYWxsZWwiLCJlZGdlSW50ZXJzZWN0aW9uIiwiY2FsY3VsYXRlRWRnZUludGVyc2VjdGlvbiIsImVkZ2VJbnRlcnNlY3Rpb25Ob25Ucml2aWFsIiwiY2FsY3VsYXRlSW50ZXJtZWRpYXRlVmVydGV4Iiwic3RhcnRWZXJ0ZXgiLCJlbmRWZXJ0ZXgiLCJWZXJ0ZXgiLCJzdGFydFBvc2l0aW9uIiwiZ2V0UG9zaXRpb24iLCJlbmRQb3NpdGlvbiIsImV4dGVudCIsIm9mZnNldCIsInBvc2l0aW9uIiwidmVydGV4IiwiaW50ZXJtZWRpYXRlVmVydGV4IiwiY2FsY3VsYXRlTm9uTnVsbEludGVyc2VjdGlvbnMiLCJpbnRlcnNlY3Rpb25zIiwibm9uTnVsbEludGVyc2VjdGlvbnMiLCJyZWR1Y2UiLCJub25OdWxsSW50ZXJzZWN0aW9uIiwicHVzaCIsImNhbGN1bGF0ZU51bGxJbnRlcnNlY3Rpb25JbmRleCIsIm51bGxJbnRlcnNlY3Rpb25JbmRleCIsImluZGV4IiwiY2FsY3VsYXRlTm9uTnVsbEludGVyc2VjdGlvbkluZGV4IiwibW9kdWxlIiwiZXhwb3J0cyIsImVkZ2VFeHRlbnQiLCJnZXRFeHRlbnQiLCJlZGdlRXh0ZW50Q29tcG9uZW50cyIsImZpcnN0RWRnZUV4dGVudENvbXBvbmVudCIsInNlY29uZEVkZ2VFeHRlbnRDb21wb25lbnQiLCJlZGdlQW5nbGVUYW5nZW50IiwiZWRnZUFuZ2xlVGFuZ2VudEFwcHJveGltYXRlbHlFcXVhbFRvWmVybyIsImVkZ2VQYXJhbGxlbCIsImVkZ2VQb3NpdGlvbiIsImVkZ2VQb3NpdGlvbkNvbXBvbmVudHMiLCJmaXJzdEVkZ2VQb3NpdGlvbkNvbXBvbmVudCJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUEsSUFBTUEsY0FBY0MsUUFBUSxpQkFBUixDQUFwQjtBQUFBLElBQ01DLGlCQUFpQkQsUUFBUSxvQkFBUixDQUR2QjtBQUFBLElBRU1FLHVCQUF1QkYsUUFBUSwwQkFBUixDQUY3Qjs7SUFJUUcsSSxHQUE0QkosVyxDQUE1QkksSTtJQUFNQyxTLEdBQXNCTCxXLENBQXRCSyxTO0lBQVdDLE0sR0FBV04sVyxDQUFYTSxNO0lBQ2pCQyxLLEdBQWtCTCxjLENBQWxCSyxLO0lBQU9DLE0sR0FBV04sYyxDQUFYTSxNO0lBQ1BDLDBCLEdBQStCTixvQixDQUEvQk0sMEI7OztBQUVSLFNBQVNDLHFCQUFULENBQStCQyxJQUEvQixFQUFxQ0Msc0JBQXJDLEVBQTZEO0FBQzNELE1BQUlDLGVBQWUsSUFBbkI7O0FBRUEsTUFBTUMsa0JBQWtCQyxrQkFBa0JKLElBQWxCLENBQXhCOztBQUVBLE1BQUlHLGVBQUosRUFBcUI7QUFDbkIsUUFBTUUsbUJBQW1CQywwQkFBMEJOLElBQTFCLEVBQWdDQyxzQkFBaEMsQ0FBekI7QUFBQSxRQUNNTSw2QkFBK0JGLG1CQUFtQixDQUFwQixJQUE0QkEsbUJBQW1CLENBRG5GOztBQUdBLFFBQUlFLDBCQUFKLEVBQWdDO0FBQzlCTCxxQkFBZUcsZ0JBQWYsQ0FEOEIsQ0FDSTtBQUNuQztBQUNGOztBQUVELFNBQU9ILFlBQVA7QUFDRDs7QUFFRCxTQUFTTSwyQkFBVCxDQUFxQ0MsV0FBckMsRUFBa0RDLFNBQWxELEVBQTZEUixZQUE3RCxFQUEyRVMsTUFBM0UsRUFBbUY7QUFDakYsTUFBTUMsZ0JBQWdCSCxZQUFZSSxXQUFaLEVBQXRCO0FBQUEsTUFDTUMsY0FBY0osVUFBVUcsV0FBVixFQURw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QztBQUNuQ1UsK0JBQTZCOUMsTUFBTTZDLHNCQUFOLENBSm5DO0FBQUEsTUFLTU4sMkJBQTJCdkMsTUFBTXNDLG9CQUFOLENBTGpDO0FBQUEsTUFNTTdCLG1CQUFtQixDQUFDSix5QkFBeUJ5QywwQkFBMUIsSUFBd0RQLHdCQU5qRjs7QUFRQSxTQUFPOUIsZ0JBQVA7QUFDRCIsImZpbGUiOiJpbnRlcnNlY3Rpb24uanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmNvbnN0IHZlY3Rvck1hdGhzID0gcmVxdWlyZSgnLi4vbWF0aHMvdmVjdG9yJyksXG4gICAgICBhcnJheVV0aWxpdGllcyA9IHJlcXVpcmUoJy4uL3V0aWxpdGllcy9hcnJheScpLFxuICAgICAgYXBwcm94aW1hdGVVdGlsaXRpZXMgPSByZXF1aXJlKCcuLi91dGlsaXRpZXMvYXBwcm94aW1hdGUnKTtcblxuY29uc3QgeyBhZGQzLCBzdWJ0cmFjdDMsIHNjYWxlMyB9ID0gdmVjdG9yTWF0aHMsXG4gICAgICB7IGZpcnN0LCBzZWNvbmQgfSA9IGFycmF5VXRpbGl0aWVzLFxuICAgICAgeyBpc0FwcHJveGltYXRlbHlFcXVhbFRvWmVybyB9ID0gYXBwcm94aW1hdGVVdGlsaXRpZXM7XG5cbmZ1bmN0aW9uIGNhbGN1bGF0ZUludGVyc2VjdGlvbihlZGdlLCBmaXJzdFBvc2l0aW9uQ29tcG9uZW50KSB7XG4gIGxldCBpbnRlcnNlY3Rpb24gPSBudWxsO1xuXG4gIGNvbnN0IGVkZ2VOb25QYXJhbGxlbCA9IGlzRWRnZU5vblBhcmFsbGVsKGVkZ2UpO1xuXG4gIGlmIChlZGdlTm9uUGFyYWxsZWwpIHtcbiAgICBjb25zdCBlZGdlSW50ZXJzZWN0aW9uID0gY2FsY3VsYXRlRWRnZUludGVyc2VjdGlvbihlZGdlLCBmaXJzdFBvc2l0aW9uQ29tcG9uZW50KSxcbiAgICAgICAgICBlZGdlSW50ZXJzZWN0aW9uTm9uVHJpdmlhbCA9ICgoZWRnZUludGVyc2VjdGlvbiA+IDAgKSAmJiAoZWRnZUludGVyc2VjdGlvbiA8IDEpKTtcblxuICAgIGlmIChlZGdlSW50ZXJzZWN0aW9uTm9uVHJpdmlhbCkge1xuICAgICAgaW50ZXJzZWN0aW9uID0gZWRnZUludGVyc2VjdGlvbjsgIC8vL1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBpbnRlcnNlY3Rpb247XG59XG5cbmZ1bmN0aW9uIGNhbGN1bGF0ZUludGVybWVkaWF0ZVZlcnRleChzdGFydFZlcnRleCwgZW5kVmVydGV4LCBpbnRlcnNlY3Rpb24sIFZlcnRleCkge1xuICBjb25zdCBzdGFydFBvc2l0aW9uID0gc3RhcnRWZXJ0ZXguZ2V0UG9zaXRpb24oKSxcbiAgICAgICAgZW5kUG9zaXRpb24gPSBlbmRWZXJ0ZXguZ2V0UG9zaXRpb24oKSxcbiAgICAgICAgZXh0ZW50ID0gc3VidHJhY3QzKGVuZFBvc2l0aW9uLCBzdGFydFBvc2l0aW9uKSxcbiAgICAgICAgb2Zmc2V0ID0gc2NhbGUzKGV4dGVudCwgaW50ZXJzZWN0aW9uKSxcbiAgICAgICAgcG9zaXRpb24gPSBhZGQzKHN0YXJ0UG9zaXRpb24sIG9mZnNldCksXG4gICAgICAgIHZlcnRleCA9IG5ldyBWZXJ0ZXgocG9zaXRpb24pLFxuICAgICAgICBpbnRlcm1lZGlhdGVWZXJ0ZXggPSB2ZXJ0ZXg7ICAvLy9cblxuICByZXR1cm4gaW50ZXJtZWRpYXRlVmVydGV4O1xufVxuXG5mdW5jdGlvbiBjYWxjdWxhdGVOb25OdWxsSW50ZXJzZWN0aW9ucyhpbnRlcnNlY3Rpb25zKSB7XG4gIGNvbnN0IG5vbk51bGxJbnRlcnNlY3Rpb25zID0gaW50ZXJzZWN0aW9ucy5yZWR1Y2UoZnVuY3Rpb24obm9uTnVsbEludGVyc2VjdGlvbnMsIGludGVyc2VjdGlvbikge1xuICAgIGlmIChpbnRlcnNlY3Rpb24gIT09IG51bGwpIHtcbiAgICAgIGNvbnN0IG5vbk51bGxJbnRlcnNlY3Rpb24gPSBpbnRlcnNlY3Rpb247IC8vL1xuXG4gICAgICBub25OdWxsSW50ZXJzZWN0aW9ucy5wdXNoKG5vbk51bGxJbnRlcnNlY3Rpb24pO1xuICAgIH1cblxuICAgIHJldHVybiBub25OdWxsSW50ZXJzZWN0aW9ucztcbiAgfSwgW10pO1xuXG4gIHJldHVybiBub25OdWxsSW50ZXJzZWN0aW9ucztcbn1cblxuZnVuY3Rpb24gY2FsY3VsYXRlTnVsbEludGVyc2VjdGlvbkluZGV4KGludGVyc2VjdGlvbnMpIHtcbiAgY29uc3QgbnVsbEludGVyc2VjdGlvbkluZGV4ID0gaW50ZXJzZWN0aW9ucy5yZWR1Y2UoZnVuY3Rpb24obnVsbEludGVyc2VjdGlvbkluZGV4LCBpbnRlcnNlY3Rpb24sIGluZGV4KSB7XG4gICAgaWYgKG51bGxJbnRlcnNlY3Rpb25JbmRleCA9PT0gbnVsbCkge1xuICAgICAgaWYgKGludGVyc2VjdGlvbiA9PT0gbnVsbCkge1xuICAgICAgICBudWxsSW50ZXJzZWN0aW9uSW5kZXggPSBpbmRleDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbEludGVyc2VjdGlvbkluZGV4O1xuICB9LCBudWxsKTtcblxuICByZXR1cm4gbnVsbEludGVyc2VjdGlvbkluZGV4O1xufVxuXG5mdW5jdGlvbiBjYWxjdWxhdGVOb25OdWxsSW50ZXJzZWN0aW9uSW5kZXgoaW50ZXJzZWN0aW9ucykge1xuICBjb25zdCBudWxsSW50ZXJzZWN0aW9uSW5kZXggPSBpbnRlcnNlY3Rpb25zLnJlZHVjZShmdW5jdGlvbihudWxsSW50ZXJzZWN0aW9uSW5kZXgsIGludGVyc2VjdGlvbiwgaW5kZXgpIHtcbiAgICBpZiAobnVsbEludGVyc2VjdGlvbkluZGV4ID09PSBudWxsKSB7XG4gICAgICBpZiAoaW50ZXJzZWN0aW9uICE9PSBudWxsKSB7XG4gICAgICAgIG51bGxJbnRlcnNlY3Rpb25JbmRleCA9IGluZGV4O1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsSW50ZXJzZWN0aW9uSW5kZXg7XG4gIH0sIG51bGwpO1xuXG4gIHJldHVybiBudWxsSW50ZXJzZWN0aW9uSW5kZXg7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSB7XG4gIGNhbGN1bGF0ZUludGVyc2VjdGlvbjogY2FsY3VsYXRlSW50ZXJzZWN0aW9uLFxuICBjYWxjdWxhdGVJbnRlcm1lZGlhdGVWZXJ0ZXg6IGNhbGN1bGF0ZUludGVybWVkaWF0ZVZlcnRleCxcbiAgY2FsY3VsYXRlTm9uTnVsbEludGVyc2VjdGlvbnM6IGNhbGN1bGF0ZU5vbk51bGxJbnRlcnNlY3Rpb25zLFxuICBjYWxjdWxhdGVOdWxsSW50ZXJzZWN0aW9uSW5kZXg6IGNhbGN1bGF0ZU51bGxJbnRlcnNlY3Rpb25JbmRleCxcbiAgY2FsY3VsYXRlTm9uTnVsbEludGVyc2VjdGlvbkluZGV4OiBjYWxjdWxhdGVOb25OdWxsSW50ZXJzZWN0aW9uSW5kZXhcbn07XG5cbmZ1bmN0aW9uIGlzRWRnZU5vblBhcmFsbGVsKGVkZ2UpIHtcbiAgY29uc3QgZWRnZUV4dGVudCA9IGVkZ2UuZ2V0RXh0ZW50KCksXG4gICAgICAgIGVkZ2VFeHRlbnRDb21wb25lbnRzID0gZWRnZUV4dGVudCwgLy8vXG4gICAgICAgIGZpcnN0RWRnZUV4dGVudENvbXBvbmVudCA9IGZpcnN0KGVkZ2VFeHRlbnRDb21wb25lbnRzKSxcbiAgICAgICAgc2Vjb25kRWRnZUV4dGVudENvbXBvbmVudCA9IHNlY29uZChlZGdlRXh0ZW50Q29tcG9uZW50cyksXG4gICAgICAgIGVkZ2VBbmdsZVRhbmdlbnQgPSBmaXJzdEVkZ2VFeHRlbnRDb21wb25lbnQgLyBzZWNvbmRFZGdlRXh0ZW50Q29tcG9uZW50LFxuICAgICAgICBlZGdlQW5nbGVUYW5nZW50QXBwcm94aW1hdGVseUVxdWFsVG9aZXJvID0gaXNBcHByb3hpbWF0ZWx5RXF1YWxUb1plcm8oZWRnZUFuZ2xlVGFuZ2VudCksXG4gICAgICAgIGVkZ2VQYXJhbGxlbCA9IGVkZ2VBbmdsZVRhbmdlbnRBcHByb3hpbWF0ZWx5RXF1YWxUb1plcm8sIC8vL1xuICAgICAgICBlZGdlTm9uUGFyYWxsZWwgPSAhZWRnZVBhcmFsbGVsO1xuXG4gIHJldHVybiBlZGdlTm9uUGFyYWxsZWw7XG59XG5cbmZ1bmN0aW9uIGNhbGN1bGF0ZUVkZ2VJbnRlcnNlY3Rpb24oZWRnZSwgZmlyc3RQb3NpdGlvbkNvbXBvbmVudCkge1xuICBjb25zdCBlZGdlUG9zaXRpb24gPSBlZGdlLmdldFBvc2l0aW9uKCksXG4gICAgICAgIGVkZ2VFeHRlbnQgPSBlZGdlLmdldEV4dGVudCgpLFxuICAgICAgICBlZGdlUG9zaXRpb25Db21wb25lbnRzID0gZWRnZVBvc2l0aW9uLCAvLy9cbiAgICAgICAgZWRnZUV4dGVudENvbXBvbmVudHMgPSBlZGdlRXh0ZW50LCAvLy9cbiAgICAgICAgZmlyc3RFZGdlUG9zaXRpb25Db21wb25lbnQgPSBmaXJzdChlZGdlUG9zaXRpb25Db21wb25lbnRzKSxcbiAgICAgICAgZmlyc3RFZGdlRXh0ZW50Q29tcG9uZW50ID0gZmlyc3QoZWRnZUV4dGVudENvbXBvbmVudHMpLFxuICAgICAgICBlZGdlSW50ZXJzZWN0aW9uID0gKGZpcnN0UG9zaXRpb25Db21wb25lbnQgLSBmaXJzdEVkZ2VQb3NpdGlvbkNvbXBvbmVudCkgLyBmaXJzdEVkZ2VFeHRlbnRDb21wb25lbnQ7XG5cbiAgcmV0dXJuIGVkZ2VJbnRlcnNlY3Rpb247XG59XG4iXX0=