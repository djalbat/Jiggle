'use strict';

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

var vectorMaths = require('../maths/vector'),
    arrayUtilities = require('../utilities/array'),
    quaternionUtilities = require('../utilities/quaternion');

var first = arrayUtilities.first,
    second = arrayUtilities.second,
    fourth = arrayUtilities.fourth,
    transform3 = vectorMaths.transform3,
    normalise3 = vectorMaths.normalise3,
    calculateInverseRotationQuaternion = quaternionUtilities.calculateInverseRotationQuaternion,
    rotateImaginaryQuaternion = quaternionUtilities.rotateImaginaryQuaternion;


function rotateVertices(vertices, rotationQuaternion) {
  var inverseRotationQuaternion = calculateInverseRotationQuaternion(rotationQuaternion);

  vertices = vertices.map(function (vertex) {
    vertex = rotateVertex(vertex, rotationQuaternion, inverseRotationQuaternion);

    return vertex;
  });

  return vertices;
}

function rotateVertexAboutZAxis(vertex, rotationAboutZAxisMatrix) {
  var matrix = rotationAboutZAxisMatrix; ///

  vertex = transform3(vertex, matrix);

  return vertex;
}

function rotatePositionAboutZAxis(position, rotationAboutZAxisMatrix) {
  var matrix = rotationAboutZAxisMatrix; ///

  position = transform3(position, matrix);

  return position;
}

function calculateRotationAboutZAxisMatrix(maskingEdge) {
  var maskingEdgeExtent = maskingEdge.getExtent(),
      unitMaskingEdgeExtent = normalise3(maskingEdgeExtent),
      unitMaskingEdgeExtentComponents = unitMaskingEdgeExtent,
      ///
  firstUnitMaskingEdgeExtentComponent = first(unitMaskingEdgeExtentComponents),
      secondUnitMaskingEdgeExtentComponent = second(unitMaskingEdgeExtentComponents),
      angleOfRotationCosine = +secondUnitMaskingEdgeExtentComponent,
      ///
  angleOfRotationSine = -firstUnitMaskingEdgeExtentComponent,
      ///
  c = angleOfRotationCosine,
      s = angleOfRotationSine,
      rotationAboutZAxisMatrix = [c, -s, 0, +s, c, 0, 0, 0, 1]; ///

  return rotationAboutZAxisMatrix;
}

function calculateForwardsRotationAboutZAxisMatrix(rotationAboutZAxisMatrix) {
  var forwardsRotationAboutZAxisMatrix = rotationAboutZAxisMatrix; ///

  return forwardsRotationAboutZAxisMatrix;
}

function calculateBackwardsRotationAboutZAxisMatrix(rotationAboutZAxisMatrix) {
  var rotationAboutZAxisMatrixComponents = rotationAboutZAxisMatrix,
      ///
  firstRotationAboutZAxisMatrixComponent = first(rotationAboutZAxisMatrixComponents),
      fourthRotationAboutZAxisMatrixComponent = fourth(rotationAboutZAxisMatrixComponents),
      c = firstRotationAboutZAxisMatrixComponent,
      ///
  s = fourthRotationAboutZAxisMatrixComponent,
      ///
  backwardsRotationAboutZAxisMatrix = [c, +s, 0, -s, c, 0, 0, 0, 1];

  return backwardsRotationAboutZAxisMatrix;
}

module.exports = {
  rotateVertices: rotateVertices,
  rotateVertexAboutZAxis: rotateVertexAboutZAxis,
  rotatePositionAboutZAxis: rotatePositionAboutZAxis,
  calculateRotationAboutZAxisMatrix: calculateRotationAboutZAxisMatrix,
  calculateForwardsRotationAboutZAxisMatrix: calculateForwardsRotationAboutZAxisMatrix,
  calculateBackwardsRotationAboutZAxisMatrix: calculateBackwardsRotationAboutZAxisMatrix
};

function rotateVertex(vertex, rotationQuaternion, inverseRotationQuaternion) {
  var imaginaryQuaternion = [0].concat(_toConsumableArray(vertex)),
      ///
  rotatedImaginaryQuaternion = rotateImaginaryQuaternion(imaginaryQuaternion, rotationQuaternion, inverseRotationQuaternion);

  vertex = rotatedImaginaryQuaternion.slice(1); ///

  return vertex;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL2VzNi91dGlsaXRpZXMvcm90YXRpb24uanMiXSwibmFtZXMiOlsidmVjdG9yTWF0aHMiLCJyZXF1aXJlIiwiYXJyYXlVdGlsaXRpZXMiLCJxdWF0ZXJuaW9uVXRpbGl0aWVzIiwiZmlyc3QiLCJzZWNvbmQiLCJmb3VydGgiLCJ0cmFuc2Zvcm0zIiwibm9ybWFsaXNlMyIsImNhbGN1bGF0ZUludmVyc2VSb3RhdGlvblF1YXRlcm5pb24iLCJyb3RhdGVJbWFnaW5hcnlRdWF0ZXJuaW9uIiwicm90YXRlVmVydGljZXMiLCJ2ZXJ0aWNlcyIsInJvdGF0aW9uUXVhdGVybmlvbiIsImludmVyc2VSb3RhdGlvblF1YXRlcm5pb24iLCJtYXAiLCJ2ZXJ0ZXgiLCJyb3RhdGVWZXJ0ZXgiLCJyb3RhdGVWZXJ0ZXhBYm91dFpBeGlzIiwicm90YXRpb25BYm91dFpBeGlzTWF0cml4IiwibWF0cml4Iiwicm90YXRlUG9zaXRpb25BYm91dFpBeGlzIiwicG9zaXRpb24iLCJjYWxjdWxhdGVSb3RhdGlvbkFib3V0WkF4aXNNYXRyaXgiLCJtYXNraW5nRWRnZSIsIm1hc2tpbmdFZGdlRXh0ZW50IiwiZ2V0RXh0ZW50IiwidW5pdE1hc2tpbmdFZGdlRXh0ZW50IiwidW5pdE1hc2tpbmdFZGdlRXh0ZW50Q29tcG9uZW50cyIsImZpcnN0VW5pdE1hc2tpbmdFZGdlRXh0ZW50Q29tcG9uZW50Iiwic2Vjb25kVW5pdE1hc2tpbmdFZGdlRXh0ZW50Q29tcG9uZW50IiwiYW5nbGVPZlJvdGF0aW9uQ29zaW5lIiwiYW5nbGVPZlJvdGF0aW9uU2luZSIsImMiLCJzIiwiY2FsY3VsYXRlRm9yd2FyZHNSb3RhdGlvbkFib3V0WkF4aXNNYXRyaXgiLCJmb3J3YXJkc1JvdGF0aW9uQWJvdXRaQXhpc01hdHJpeCIsImNhbGN1bGF0ZUJhY2t3YXJkc1JvdGF0aW9uQWJvdXRaQXhpc01hdHJpeCIsInJvdGF0aW9uQWJvdXRaQXhpc01hdHJpeENvbXBvbmVudHMiLCJmaXJzdFJvdGF0aW9uQWJvdXRaQXhpc01hdHJpeENvbXBvbmVudCIsImZvdXJ0aFJvdGF0aW9uQWJvdXRaQXhpc01hdHJpeENvbXBvbmVudCIsImJhY2t3YXJkc1JvdGF0aW9uQWJvdXRaQXhpc01hdHJpeCIsIm1vZHVsZSIsImV4cG9ydHMiLCJpbWFnaW5hcnlRdWF0ZXJuaW9uIiwicm90YXRlZEltYWdpbmFyeVF1YXRlcm5pb24iLCJzbGljZSJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7QUFFQSxJQUFNQSxjQUFjQyxRQUFRLGlCQUFSLENBQXBCO0FBQUEsSUFDTUMsaUJBQWlCRCxRQUFRLG9CQUFSLENBRHZCO0FBQUEsSUFFTUUsc0JBQXNCRixRQUFRLHlCQUFSLENBRjVCOztJQUlRRyxLLEdBQTBCRixjLENBQTFCRSxLO0lBQU9DLE0sR0FBbUJILGMsQ0FBbkJHLE07SUFBUUMsTSxHQUFXSixjLENBQVhJLE07SUFDZkMsVSxHQUEyQlAsVyxDQUEzQk8sVTtJQUFZQyxVLEdBQWVSLFcsQ0FBZlEsVTtJQUNaQyxrQyxHQUFrRU4sbUIsQ0FBbEVNLGtDO0lBQW9DQyx5QixHQUE4QlAsbUIsQ0FBOUJPLHlCOzs7QUFFNUMsU0FBU0MsY0FBVCxDQUF3QkMsUUFBeEIsRUFBa0NDLGtCQUFsQyxFQUFzRDtBQUNwRCxNQUFNQyw0QkFBNEJMLG1DQUFtQ0ksa0JBQW5DLENBQWxDOztBQUVBRCxhQUFXQSxTQUFTRyxHQUFULENBQWEsVUFBU0MsTUFBVCxFQUFpQjtBQUN2Q0EsYUFBU0MsYUFBYUQsTUFBYixFQUFxQkgsa0JBQXJCLEVBQXlDQyx5QkFBekMsQ0FBVDs7QUFFQSxXQUFPRSxNQUFQO0FBQ0QsR0FKVSxDQUFYOztBQU1BLFNBQU9KLFFBQVA7QUFDRDs7QUFFRCxTQUFTTSxzQkFBVCxDQUFnQ0YsTUFBaEMsRUFBd0NHLHdCQUF4QyxFQUFrRTtBQUNoRSxNQUFNQyxTQUFTRCx3QkFBZixDQURnRSxDQUN0Qjs7QUFFMUNILFdBQVNULFdBQVdTLE1BQVgsRUFBbUJJLE1BQW5CLENBQVQ7O0FBRUEsU0FBT0osTUFBUDtBQUNEOztBQUVELFNBQVNLLHdCQUFULENBQWtDQyxRQUFsQyxFQUE0Q0gsd0JBQTVDLEVBQXNFO0FBQ3BFLE1BQU1DLFNBQVNELHdCQUFmLENBRG9FLENBQzFCOztBQUUxQ0csYUFBV2YsV0FBV2UsUUFBWCxFQUFxQkYsTUFBckIsQ0FBWDs7QUFFQSxTQUFPRSxRQUFQO0FBQ0Q7O0FBRUQsU0FBU0MsaUNBQVQsQ0FBMkNDLFdBQTNDLEVBQXdEO0FBQ3RELE1BQU1DLG9CQUFvQkQsWUFBWUUsU0FBWixFQUExQjtBQUFBLE1BQ01DLHdCQUF3Qm5CLFdBQVdpQixpQkFBWCxDQUQ5QjtBQUFBLE1BRU1HLGtDQUFrQ0QscUJBRnhDO0FBQUEsTUFFZ0U7QUFDMURFLHdDQUFzQ3pCLE1BQU13QiwrQkFBTixDQUg1QztBQUFBLE1BSU1FLHVDQUF1Q3pCLE9BQU91QiwrQkFBUCxDQUo3QztBQUFBLE1BS01HLHdCQUF3QixDQUFDRCxvQ0FML0I7QUFBQSxNQUtzRTtBQUNoRUUsd0JBQXNCLENBQUNILG1DQU43QjtBQUFBLE1BTWtFO0FBQzVESSxNQUFJRixxQkFQVjtBQUFBLE1BUU1HLElBQUlGLG1CQVJWO0FBQUEsTUFTTWIsMkJBQTJCLENBQUVjLENBQUYsRUFBSyxDQUFDQyxDQUFOLEVBQVMsQ0FBVCxFQUFZLENBQUNBLENBQWIsRUFBZ0JELENBQWhCLEVBQW1CLENBQW5CLEVBQXNCLENBQXRCLEVBQXlCLENBQXpCLEVBQTRCLENBQTVCLENBVGpDLENBRHNELENBVWE7O0FBRW5FLFNBQU9kLHdCQUFQO0FBQ0Q7O0FBRUQsU0FBU2dCLHlDQUFULENBQW1EaEIsd0JBQW5ELEVBQTZFO0FBQzNFLE1BQU1pQixtQ0FBbUNqQix3QkFBekMsQ0FEMkUsQ0FDUjs7QUFFbkUsU0FBT2lCLGdDQUFQO0FBQ0Q7O0FBRUQsU0FBU0MsMENBQVQsQ0FBb0RsQix3QkFBcEQsRUFBOEU7QUFDNUUsTUFBTW1CLHFDQUFxQ25CLHdCQUEzQztBQUFBLE1BQXFFO0FBQy9Eb0IsMkNBQXlDbkMsTUFBTWtDLGtDQUFOLENBRC9DO0FBQUEsTUFFTUUsMENBQTBDbEMsT0FBT2dDLGtDQUFQLENBRmhEO0FBQUEsTUFHTUwsSUFBSU0sc0NBSFY7QUFBQSxNQUdrRDtBQUM1Q0wsTUFBSU0sdUNBSlY7QUFBQSxNQUlvRDtBQUM5Q0Msc0NBQW9DLENBQUVSLENBQUYsRUFBSyxDQUFDQyxDQUFOLEVBQVMsQ0FBVCxFQUFZLENBQUNBLENBQWIsRUFBZ0JELENBQWhCLEVBQW1CLENBQW5CLEVBQXNCLENBQXRCLEVBQXlCLENBQXpCLEVBQTRCLENBQTVCLENBTDFDOztBQU9BLFNBQU9RLGlDQUFQO0FBQ0Q7O0FBRURDLE9BQU9DLE9BQVAsR0FBaUI7QUFDZmhDLGtCQUFnQkEsY0FERDtBQUVmTywwQkFBd0JBLHNCQUZUO0FBR2ZHLDRCQUEwQkEsd0JBSFg7QUFJZkUscUNBQW1DQSxpQ0FKcEI7QUFLZlksNkNBQTJDQSx5Q0FMNUI7QUFNZkUsOENBQTRDQTtBQU43QixDQUFqQjs7QUFTQSxTQUFTcEIsWUFBVCxDQUFzQkQsTUFBdEIsRUFBOEJILGtCQUE5QixFQUFrREMseUJBQWxELEVBQTZFO0FBQzNFLE1BQU04Qix1QkFBdUIsQ0FBdkIsNEJBQTZCNUIsTUFBN0IsRUFBTjtBQUFBLE1BQTRDO0FBQ3RDNkIsK0JBQTZCbkMsMEJBQTBCa0MsbUJBQTFCLEVBQStDL0Isa0JBQS9DLEVBQW1FQyx5QkFBbkUsQ0FEbkM7O0FBR0FFLFdBQVM2QiwyQkFBMkJDLEtBQTNCLENBQWlDLENBQWpDLENBQVQsQ0FKMkUsQ0FJN0I7O0FBRTlDLFNBQU85QixNQUFQO0FBQ0QiLCJmaWxlIjoicm90YXRpb24uanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmNvbnN0IHZlY3Rvck1hdGhzID0gcmVxdWlyZSgnLi4vbWF0aHMvdmVjdG9yJyksXG4gICAgICBhcnJheVV0aWxpdGllcyA9IHJlcXVpcmUoJy4uL3V0aWxpdGllcy9hcnJheScpLFxuICAgICAgcXVhdGVybmlvblV0aWxpdGllcyA9IHJlcXVpcmUoJy4uL3V0aWxpdGllcy9xdWF0ZXJuaW9uJyk7XG5cbmNvbnN0IHsgZmlyc3QsIHNlY29uZCwgZm91cnRoIH0gPSBhcnJheVV0aWxpdGllcyxcbiAgICAgIHsgdHJhbnNmb3JtMywgbm9ybWFsaXNlMyB9ID0gdmVjdG9yTWF0aHMsXG4gICAgICB7IGNhbGN1bGF0ZUludmVyc2VSb3RhdGlvblF1YXRlcm5pb24sIHJvdGF0ZUltYWdpbmFyeVF1YXRlcm5pb24gfSA9IHF1YXRlcm5pb25VdGlsaXRpZXM7XG5cbmZ1bmN0aW9uIHJvdGF0ZVZlcnRpY2VzKHZlcnRpY2VzLCByb3RhdGlvblF1YXRlcm5pb24pIHtcbiAgY29uc3QgaW52ZXJzZVJvdGF0aW9uUXVhdGVybmlvbiA9IGNhbGN1bGF0ZUludmVyc2VSb3RhdGlvblF1YXRlcm5pb24ocm90YXRpb25RdWF0ZXJuaW9uKTtcblxuICB2ZXJ0aWNlcyA9IHZlcnRpY2VzLm1hcChmdW5jdGlvbih2ZXJ0ZXgpIHtcbiAgICB2ZXJ0ZXggPSByb3RhdGVWZXJ0ZXgodmVydGV4LCByb3RhdGlvblF1YXRlcm5pb24sIGludmVyc2VSb3RhdGlvblF1YXRlcm5pb24pO1xuXG4gICAgcmV0dXJuIHZlcnRleDtcbiAgfSk7XG5cbiAgcmV0dXJuIHZlcnRpY2VzO1xufVxuXG5mdW5jdGlvbiByb3RhdGVWZXJ0ZXhBYm91dFpBeGlzKHZlcnRleCwgcm90YXRpb25BYm91dFpBeGlzTWF0cml4KSB7XG4gIGNvbnN0IG1hdHJpeCA9IHJvdGF0aW9uQWJvdXRaQXhpc01hdHJpeDsgIC8vL1xuXG4gIHZlcnRleCA9IHRyYW5zZm9ybTModmVydGV4LCBtYXRyaXgpO1xuXG4gIHJldHVybiB2ZXJ0ZXg7XG59XG5cbmZ1bmN0aW9uIHJvdGF0ZVBvc2l0aW9uQWJvdXRaQXhpcyhwb3NpdGlvbiwgcm90YXRpb25BYm91dFpBeGlzTWF0cml4KSB7XG4gIGNvbnN0IG1hdHJpeCA9IHJvdGF0aW9uQWJvdXRaQXhpc01hdHJpeDsgIC8vL1xuXG4gIHBvc2l0aW9uID0gdHJhbnNmb3JtMyhwb3NpdGlvbiwgbWF0cml4KTtcblxuICByZXR1cm4gcG9zaXRpb247XG59XG5cbmZ1bmN0aW9uIGNhbGN1bGF0ZVJvdGF0aW9uQWJvdXRaQXhpc01hdHJpeChtYXNraW5nRWRnZSkge1xuICBjb25zdCBtYXNraW5nRWRnZUV4dGVudCA9IG1hc2tpbmdFZGdlLmdldEV4dGVudCgpLFxuICAgICAgICB1bml0TWFza2luZ0VkZ2VFeHRlbnQgPSBub3JtYWxpc2UzKG1hc2tpbmdFZGdlRXh0ZW50KSxcbiAgICAgICAgdW5pdE1hc2tpbmdFZGdlRXh0ZW50Q29tcG9uZW50cyA9IHVuaXRNYXNraW5nRWRnZUV4dGVudCwgIC8vL1xuICAgICAgICBmaXJzdFVuaXRNYXNraW5nRWRnZUV4dGVudENvbXBvbmVudCA9IGZpcnN0KHVuaXRNYXNraW5nRWRnZUV4dGVudENvbXBvbmVudHMpLFxuICAgICAgICBzZWNvbmRVbml0TWFza2luZ0VkZ2VFeHRlbnRDb21wb25lbnQgPSBzZWNvbmQodW5pdE1hc2tpbmdFZGdlRXh0ZW50Q29tcG9uZW50cyksXG4gICAgICAgIGFuZ2xlT2ZSb3RhdGlvbkNvc2luZSA9ICtzZWNvbmRVbml0TWFza2luZ0VkZ2VFeHRlbnRDb21wb25lbnQsICAvLy9cbiAgICAgICAgYW5nbGVPZlJvdGF0aW9uU2luZSA9IC1maXJzdFVuaXRNYXNraW5nRWRnZUV4dGVudENvbXBvbmVudCwgLy8vXG4gICAgICAgIGMgPSBhbmdsZU9mUm90YXRpb25Db3NpbmUsXG4gICAgICAgIHMgPSBhbmdsZU9mUm90YXRpb25TaW5lLFxuICAgICAgICByb3RhdGlvbkFib3V0WkF4aXNNYXRyaXggPSBbIGMsIC1zLCAwLCArcywgYywgMCwgMCwgMCwgMSBdOyAgLy8vXG5cbiAgcmV0dXJuIHJvdGF0aW9uQWJvdXRaQXhpc01hdHJpeDtcbn1cblxuZnVuY3Rpb24gY2FsY3VsYXRlRm9yd2FyZHNSb3RhdGlvbkFib3V0WkF4aXNNYXRyaXgocm90YXRpb25BYm91dFpBeGlzTWF0cml4KSB7XG4gIGNvbnN0IGZvcndhcmRzUm90YXRpb25BYm91dFpBeGlzTWF0cml4ID0gcm90YXRpb25BYm91dFpBeGlzTWF0cml4OyAvLy9cblxuICByZXR1cm4gZm9yd2FyZHNSb3RhdGlvbkFib3V0WkF4aXNNYXRyaXg7XG59XG5cbmZ1bmN0aW9uIGNhbGN1bGF0ZUJhY2t3YXJkc1JvdGF0aW9uQWJvdXRaQXhpc01hdHJpeChyb3RhdGlvbkFib3V0WkF4aXNNYXRyaXgpIHtcbiAgY29uc3Qgcm90YXRpb25BYm91dFpBeGlzTWF0cml4Q29tcG9uZW50cyA9IHJvdGF0aW9uQWJvdXRaQXhpc01hdHJpeCwgLy8vXG4gICAgICAgIGZpcnN0Um90YXRpb25BYm91dFpBeGlzTWF0cml4Q29tcG9uZW50ID0gZmlyc3Qocm90YXRpb25BYm91dFpBeGlzTWF0cml4Q29tcG9uZW50cyksXG4gICAgICAgIGZvdXJ0aFJvdGF0aW9uQWJvdXRaQXhpc01hdHJpeENvbXBvbmVudCA9IGZvdXJ0aChyb3RhdGlvbkFib3V0WkF4aXNNYXRyaXhDb21wb25lbnRzKSxcbiAgICAgICAgYyA9IGZpcnN0Um90YXRpb25BYm91dFpBeGlzTWF0cml4Q29tcG9uZW50LCAvLy9cbiAgICAgICAgcyA9IGZvdXJ0aFJvdGF0aW9uQWJvdXRaQXhpc01hdHJpeENvbXBvbmVudCwgIC8vL1xuICAgICAgICBiYWNrd2FyZHNSb3RhdGlvbkFib3V0WkF4aXNNYXRyaXggPSBbIGMsICtzLCAwLCAtcywgYywgMCwgMCwgMCwgMSBdO1xuXG4gIHJldHVybiBiYWNrd2FyZHNSb3RhdGlvbkFib3V0WkF4aXNNYXRyaXg7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICByb3RhdGVWZXJ0aWNlczogcm90YXRlVmVydGljZXMsXG4gIHJvdGF0ZVZlcnRleEFib3V0WkF4aXM6IHJvdGF0ZVZlcnRleEFib3V0WkF4aXMsXG4gIHJvdGF0ZVBvc2l0aW9uQWJvdXRaQXhpczogcm90YXRlUG9zaXRpb25BYm91dFpBeGlzLFxuICBjYWxjdWxhdGVSb3RhdGlvbkFib3V0WkF4aXNNYXRyaXg6IGNhbGN1bGF0ZVJvdGF0aW9uQWJvdXRaQXhpc01hdHJpeCxcbiAgY2FsY3VsYXRlRm9yd2FyZHNSb3RhdGlvbkFib3V0WkF4aXNNYXRyaXg6IGNhbGN1bGF0ZUZvcndhcmRzUm90YXRpb25BYm91dFpBeGlzTWF0cml4LFxuICBjYWxjdWxhdGVCYWNrd2FyZHNSb3RhdGlvbkFib3V0WkF4aXNNYXRyaXg6IGNhbGN1bGF0ZUJhY2t3YXJkc1JvdGF0aW9uQWJvdXRaQXhpc01hdHJpeFxufTtcblxuZnVuY3Rpb24gcm90YXRlVmVydGV4KHZlcnRleCwgcm90YXRpb25RdWF0ZXJuaW9uLCBpbnZlcnNlUm90YXRpb25RdWF0ZXJuaW9uKSB7XG4gIGNvbnN0IGltYWdpbmFyeVF1YXRlcm5pb24gPSBbMCwgLi4udmVydGV4XSwgLy8vXG4gICAgICAgIHJvdGF0ZWRJbWFnaW5hcnlRdWF0ZXJuaW9uID0gcm90YXRlSW1hZ2luYXJ5UXVhdGVybmlvbihpbWFnaW5hcnlRdWF0ZXJuaW9uLCByb3RhdGlvblF1YXRlcm5pb24sIGludmVyc2VSb3RhdGlvblF1YXRlcm5pb24pO1xuXG4gIHZlcnRleCA9IHJvdGF0ZWRJbWFnaW5hcnlRdWF0ZXJuaW9uLnNsaWNlKDEpOyAvLy9cblxuICByZXR1cm4gdmVydGV4O1xufVxuIl19