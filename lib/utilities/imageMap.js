'use strict';

var arrayUtilities = require('../utilities/array'),
    imageUtilities = require('../utilities/image');

var flatten = arrayUtilities.flatten,
    preloadImage = imageUtilities.preloadImage,
    _runtimeConfiguration = runtimeConfiguration,
    imageMapJSON = _runtimeConfiguration.imageMapJSON;


function preloadImageMap(canvas, textureShader, done) {
  var source = 'imageMap'; ///

  preloadImage(source, function (image) {
    textureShader.createTexture(image, canvas);

    done();
  });
}

function textureCoordinateDataFromImageName(imageName) {
  var imageNames = [imageName, imageName, imageName, imageName, imageName, imageName],
      textureCoordinateData = textureCoordinateDataFromImageNames(imageNames);

  return textureCoordinateData;
}

function textureCoordinateDataFromImageNames(imageNames) {
  var textureCoordinates = imageNames.reduce(function (textureCoordinates, textureName) {
    textureCoordinates = textureCoordinates.concat(imageMapJSON[textureName]);

    return textureCoordinates;
  }, []),
      textureCoordinateData = flatten(textureCoordinates);

  return textureCoordinateData;
}

module.exports = {
  preloadImageMap: preloadImageMap,
  textureCoordinateDataFromImageName: textureCoordinateDataFromImageName,
  textureCoordinateDataFromImageNames: textureCoordinateDataFromImageNames
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL2VzNi91dGlsaXRpZXMvaW1hZ2VNYXAuanMiXSwibmFtZXMiOlsiYXJyYXlVdGlsaXRpZXMiLCJyZXF1aXJlIiwiaW1hZ2VVdGlsaXRpZXMiLCJmbGF0dGVuIiwicHJlbG9hZEltYWdlIiwicnVudGltZUNvbmZpZ3VyYXRpb24iLCJpbWFnZU1hcEpTT04iLCJwcmVsb2FkSW1hZ2VNYXAiLCJjYW52YXMiLCJ0ZXh0dXJlU2hhZGVyIiwiZG9uZSIsInNvdXJjZSIsImltYWdlIiwiY3JlYXRlVGV4dHVyZSIsInRleHR1cmVDb29yZGluYXRlRGF0YUZyb21JbWFnZU5hbWUiLCJpbWFnZU5hbWUiLCJpbWFnZU5hbWVzIiwidGV4dHVyZUNvb3JkaW5hdGVEYXRhIiwidGV4dHVyZUNvb3JkaW5hdGVEYXRhRnJvbUltYWdlTmFtZXMiLCJ0ZXh0dXJlQ29vcmRpbmF0ZXMiLCJyZWR1Y2UiLCJ0ZXh0dXJlTmFtZSIsImNvbmNhdCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBLElBQU1BLGlCQUFpQkMsUUFBUSxvQkFBUixDQUF2QjtBQUFBLElBQ01DLGlCQUFpQkQsUUFBUSxvQkFBUixDQUR2Qjs7QUFHTSxJQUFFRSxPQUFGLEdBQWNILGNBQWQsQ0FBRUcsT0FBRjtBQUFBLElBQ0VDLFlBREYsR0FDbUJGLGNBRG5CLENBQ0VFLFlBREY7QUFBQSw0QkFFbUJDLG9CQUZuQjtBQUFBLElBRUVDLFlBRkYseUJBRUVBLFlBRkY7OztBQUlOLFNBQVNDLGVBQVQsQ0FBeUJDLE1BQXpCLEVBQWlDQyxhQUFqQyxFQUFnREMsSUFBaEQsRUFBc0Q7QUFDcEQsTUFBTUMsU0FBUyxVQUFmLENBRG9ELENBQ3hCOztBQUU1QlAsZUFBYU8sTUFBYixFQUFxQixVQUFTQyxLQUFULEVBQWdCO0FBQ25DSCxrQkFBY0ksYUFBZCxDQUE0QkQsS0FBNUIsRUFBbUNKLE1BQW5DOztBQUVBRTtBQUNELEdBSkQ7QUFLRDs7QUFFRCxTQUFTSSxrQ0FBVCxDQUE0Q0MsU0FBNUMsRUFBdUQ7QUFDckQsTUFBTUMsYUFBYSxDQUNYRCxTQURXLEVBRVhBLFNBRlcsRUFHWEEsU0FIVyxFQUlYQSxTQUpXLEVBS1hBLFNBTFcsRUFNWEEsU0FOVyxDQUFuQjtBQUFBLE1BUU1FLHdCQUF3QkMsb0NBQW9DRixVQUFwQyxDQVI5Qjs7QUFVQSxTQUFPQyxxQkFBUDtBQUNEOztBQUVELFNBQVNDLG1DQUFULENBQTZDRixVQUE3QyxFQUF5RDtBQUN2RCxNQUFNRyxxQkFBcUJILFdBQVdJLE1BQVgsQ0FBa0IsVUFBU0Qsa0JBQVQsRUFBNkJFLFdBQTdCLEVBQTBDO0FBQy9FRix5QkFBcUJBLG1CQUFtQkcsTUFBbkIsQ0FBMEJoQixhQUFhZSxXQUFiLENBQTFCLENBQXJCOztBQUVBLFdBQU9GLGtCQUFQO0FBQ0QsR0FKb0IsRUFJbEIsRUFKa0IsQ0FBM0I7QUFBQSxNQUtNRix3QkFBd0JkLFFBQVFnQixrQkFBUixDQUw5Qjs7QUFPQSxTQUFPRixxQkFBUDtBQUNEOztBQUVETSxPQUFPQyxPQUFQLEdBQWlCO0FBQ2ZqQixtQkFBaUJBLGVBREY7QUFFZk8sc0NBQW9DQSxrQ0FGckI7QUFHZkksdUNBQXFDQTtBQUh0QixDQUFqQiIsImZpbGUiOiJpbWFnZU1hcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuY29uc3QgYXJyYXlVdGlsaXRpZXMgPSByZXF1aXJlKCcuLi91dGlsaXRpZXMvYXJyYXknKSxcbiAgICAgIGltYWdlVXRpbGl0aWVzID0gcmVxdWlyZSgnLi4vdXRpbGl0aWVzL2ltYWdlJyk7XG5cbmNvbnN0IHsgZmxhdHRlbiB9ID0gYXJyYXlVdGlsaXRpZXMsXG4gICAgICB7IHByZWxvYWRJbWFnZSB9ID0gaW1hZ2VVdGlsaXRpZXMsXG4gICAgICB7IGltYWdlTWFwSlNPTiB9ID0gcnVudGltZUNvbmZpZ3VyYXRpb247XG5cbmZ1bmN0aW9uIHByZWxvYWRJbWFnZU1hcChjYW52YXMsIHRleHR1cmVTaGFkZXIsIGRvbmUpIHtcbiAgY29uc3Qgc291cmNlID0gJ2ltYWdlTWFwJzsgIC8vL1xuXG4gIHByZWxvYWRJbWFnZShzb3VyY2UsIGZ1bmN0aW9uKGltYWdlKSB7XG4gICAgdGV4dHVyZVNoYWRlci5jcmVhdGVUZXh0dXJlKGltYWdlLCBjYW52YXMpO1xuXG4gICAgZG9uZSgpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gdGV4dHVyZUNvb3JkaW5hdGVEYXRhRnJvbUltYWdlTmFtZShpbWFnZU5hbWUpIHtcbiAgY29uc3QgaW1hZ2VOYW1lcyA9IFtcbiAgICAgICAgICBpbWFnZU5hbWUsXG4gICAgICAgICAgaW1hZ2VOYW1lLFxuICAgICAgICAgIGltYWdlTmFtZSxcbiAgICAgICAgICBpbWFnZU5hbWUsXG4gICAgICAgICAgaW1hZ2VOYW1lLFxuICAgICAgICAgIGltYWdlTmFtZVxuICAgICAgICBdLFxuICAgICAgICB0ZXh0dXJlQ29vcmRpbmF0ZURhdGEgPSB0ZXh0dXJlQ29vcmRpbmF0ZURhdGFGcm9tSW1hZ2VOYW1lcyhpbWFnZU5hbWVzKTtcbiAgXG4gIHJldHVybiB0ZXh0dXJlQ29vcmRpbmF0ZURhdGE7XG59XG5cbmZ1bmN0aW9uIHRleHR1cmVDb29yZGluYXRlRGF0YUZyb21JbWFnZU5hbWVzKGltYWdlTmFtZXMpIHtcbiAgY29uc3QgdGV4dHVyZUNvb3JkaW5hdGVzID0gaW1hZ2VOYW1lcy5yZWR1Y2UoZnVuY3Rpb24odGV4dHVyZUNvb3JkaW5hdGVzLCB0ZXh0dXJlTmFtZSkge1xuICAgICAgICAgIHRleHR1cmVDb29yZGluYXRlcyA9IHRleHR1cmVDb29yZGluYXRlcy5jb25jYXQoaW1hZ2VNYXBKU09OW3RleHR1cmVOYW1lXSk7XG5cbiAgICAgICAgICByZXR1cm4gdGV4dHVyZUNvb3JkaW5hdGVzO1xuICAgICAgICB9LCBbXSksXG4gICAgICAgIHRleHR1cmVDb29yZGluYXRlRGF0YSA9IGZsYXR0ZW4odGV4dHVyZUNvb3JkaW5hdGVzKTtcbiAgXG4gIHJldHVybiB0ZXh0dXJlQ29vcmRpbmF0ZURhdGE7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBwcmVsb2FkSW1hZ2VNYXA6IHByZWxvYWRJbWFnZU1hcCxcbiAgdGV4dHVyZUNvb3JkaW5hdGVEYXRhRnJvbUltYWdlTmFtZTogdGV4dHVyZUNvb3JkaW5hdGVEYXRhRnJvbUltYWdlTmFtZSxcbiAgdGV4dHVyZUNvb3JkaW5hdGVEYXRhRnJvbUltYWdlTmFtZXM6IHRleHR1cmVDb29yZGluYXRlRGF0YUZyb21JbWFnZU5hbWVzICBcbn07XG4iXX0=