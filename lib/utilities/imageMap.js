'use strict';

var arrayUtilities = require('../utilities/array'),
    imageUtilities = require('../utilities/image');

var flatten = arrayUtilities.flatten,
    preloadImage = imageUtilities.preloadImage,
    _runtimeConfiguration = runtimeConfiguration,
    imageMapJSON = _runtimeConfiguration.imageMapJSON;


function preloadImageMap(canvas, textureShader, done) {
  var source = 'imageMap'; ///

  preloadImage(source, function (image) {
    textureShader.createTexture(image, canvas);

    done();
  });
}

function textureCoordinateDataFromImageNames(imageNames) {
  var textureCoordinates = imageNames.reduce(function (textureCoordinates, textureName) {
    textureCoordinates = textureCoordinates.concat(imageMapJSON[textureName]);

    return textureCoordinates;
  }, []),
      textureCoordinateData = flatten(textureCoordinates);

  return textureCoordinateData;
}

module.exports = {
  preloadImageMap: preloadImageMap,
  textureCoordinateDataFromImageNames: textureCoordinateDataFromImageNames
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL2VzNi91dGlsaXRpZXMvaW1hZ2VNYXAuanMiXSwibmFtZXMiOlsiYXJyYXlVdGlsaXRpZXMiLCJyZXF1aXJlIiwiaW1hZ2VVdGlsaXRpZXMiLCJmbGF0dGVuIiwicHJlbG9hZEltYWdlIiwicnVudGltZUNvbmZpZ3VyYXRpb24iLCJpbWFnZU1hcEpTT04iLCJwcmVsb2FkSW1hZ2VNYXAiLCJjYW52YXMiLCJ0ZXh0dXJlU2hhZGVyIiwiZG9uZSIsInNvdXJjZSIsImltYWdlIiwiY3JlYXRlVGV4dHVyZSIsInRleHR1cmVDb29yZGluYXRlRGF0YUZyb21JbWFnZU5hbWVzIiwiaW1hZ2VOYW1lcyIsInRleHR1cmVDb29yZGluYXRlcyIsInJlZHVjZSIsInRleHR1cmVOYW1lIiwiY29uY2F0IiwidGV4dHVyZUNvb3JkaW5hdGVEYXRhIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUEsSUFBTUEsaUJBQWlCQyxRQUFRLG9CQUFSLENBQXZCO0FBQUEsSUFDTUMsaUJBQWlCRCxRQUFRLG9CQUFSLENBRHZCOztBQUdNLElBQUVFLE9BQUYsR0FBY0gsY0FBZCxDQUFFRyxPQUFGO0FBQUEsSUFDRUMsWUFERixHQUNtQkYsY0FEbkIsQ0FDRUUsWUFERjtBQUFBLDRCQUVtQkMsb0JBRm5CO0FBQUEsSUFFRUMsWUFGRix5QkFFRUEsWUFGRjs7O0FBSU4sU0FBU0MsZUFBVCxDQUF5QkMsTUFBekIsRUFBaUNDLGFBQWpDLEVBQWdEQyxJQUFoRCxFQUFzRDtBQUNwRCxNQUFNQyxTQUFTLFVBQWYsQ0FEb0QsQ0FDeEI7O0FBRTVCUCxlQUFhTyxNQUFiLEVBQXFCLFVBQVNDLEtBQVQsRUFBZ0I7QUFDbkNILGtCQUFjSSxhQUFkLENBQTRCRCxLQUE1QixFQUFtQ0osTUFBbkM7O0FBRUFFO0FBQ0QsR0FKRDtBQUtEOztBQUVELFNBQVNJLG1DQUFULENBQTZDQyxVQUE3QyxFQUF5RDtBQUN2RCxNQUFNQyxxQkFBcUJELFdBQVdFLE1BQVgsQ0FBa0IsVUFBU0Qsa0JBQVQsRUFBNkJFLFdBQTdCLEVBQTBDO0FBQy9FRix5QkFBcUJBLG1CQUFtQkcsTUFBbkIsQ0FBMEJiLGFBQWFZLFdBQWIsQ0FBMUIsQ0FBckI7O0FBRUEsV0FBT0Ysa0JBQVA7QUFDRCxHQUpvQixFQUlsQixFQUprQixDQUEzQjtBQUFBLE1BS01JLHdCQUF3QmpCLFFBQVFhLGtCQUFSLENBTDlCOztBQU9BLFNBQU9JLHFCQUFQO0FBQ0Q7O0FBRURDLE9BQU9DLE9BQVAsR0FBaUI7QUFDZmYsbUJBQWlCQSxlQURGO0FBRWZPLHVDQUFxQ0E7QUFGdEIsQ0FBakIiLCJmaWxlIjoiaW1hZ2VNYXAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmNvbnN0IGFycmF5VXRpbGl0aWVzID0gcmVxdWlyZSgnLi4vdXRpbGl0aWVzL2FycmF5JyksXG4gICAgICBpbWFnZVV0aWxpdGllcyA9IHJlcXVpcmUoJy4uL3V0aWxpdGllcy9pbWFnZScpO1xuXG5jb25zdCB7IGZsYXR0ZW4gfSA9IGFycmF5VXRpbGl0aWVzLFxuICAgICAgeyBwcmVsb2FkSW1hZ2UgfSA9IGltYWdlVXRpbGl0aWVzLFxuICAgICAgeyBpbWFnZU1hcEpTT04gfSA9IHJ1bnRpbWVDb25maWd1cmF0aW9uO1xuXG5mdW5jdGlvbiBwcmVsb2FkSW1hZ2VNYXAoY2FudmFzLCB0ZXh0dXJlU2hhZGVyLCBkb25lKSB7XG4gIGNvbnN0IHNvdXJjZSA9ICdpbWFnZU1hcCc7ICAvLy9cblxuICBwcmVsb2FkSW1hZ2Uoc291cmNlLCBmdW5jdGlvbihpbWFnZSkge1xuICAgIHRleHR1cmVTaGFkZXIuY3JlYXRlVGV4dHVyZShpbWFnZSwgY2FudmFzKTtcblxuICAgIGRvbmUoKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHRleHR1cmVDb29yZGluYXRlRGF0YUZyb21JbWFnZU5hbWVzKGltYWdlTmFtZXMpIHtcbiAgY29uc3QgdGV4dHVyZUNvb3JkaW5hdGVzID0gaW1hZ2VOYW1lcy5yZWR1Y2UoZnVuY3Rpb24odGV4dHVyZUNvb3JkaW5hdGVzLCB0ZXh0dXJlTmFtZSkge1xuICAgICAgICAgIHRleHR1cmVDb29yZGluYXRlcyA9IHRleHR1cmVDb29yZGluYXRlcy5jb25jYXQoaW1hZ2VNYXBKU09OW3RleHR1cmVOYW1lXSk7XG5cbiAgICAgICAgICByZXR1cm4gdGV4dHVyZUNvb3JkaW5hdGVzO1xuICAgICAgICB9LCBbXSksXG4gICAgICAgIHRleHR1cmVDb29yZGluYXRlRGF0YSA9IGZsYXR0ZW4odGV4dHVyZUNvb3JkaW5hdGVzKTtcbiAgXG4gIHJldHVybiB0ZXh0dXJlQ29vcmRpbmF0ZURhdGE7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBwcmVsb2FkSW1hZ2VNYXA6IHByZWxvYWRJbWFnZU1hcCxcbiAgdGV4dHVyZUNvb3JkaW5hdGVEYXRhRnJvbUltYWdlTmFtZXM6IHRleHR1cmVDb29yZGluYXRlRGF0YUZyb21JbWFnZU5hbWVzICBcbn07XG4iXX0=