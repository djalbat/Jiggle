'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var domUtilities = require('./utilities/dom'),
    bufferMixin = require('./mixin/buffer'),
    shaderMixin = require('./mixin/shader'),
    colourMixin = require('./mixin/colour'),
    depthMixin = require('./mixin/depth');

var domElementFromSelector = domUtilities.domElementFromSelector;


var defaultOffset = 0;

var Canvas = function () {
  function Canvas() {
    var selector = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'canvas';

    _classCallCheck(this, Canvas);

    var domElement = domElementFromSelector(selector),
        context = domElement.getContext('webgl');

    if (!context) {
      throw new Error('Unable to initialise the context.');
    }

    this.context = context;

    this.domElement = domElement;

    this.DEPTH_TEST_CAP = this.context.DEPTH_TEST; ///
    this.LEQUAL_FUNCTION = this.context.LEQUAL; ///
    this.STATIC_DRAW_USAGE = this.context.STATIC_DRAW; ///
    this.ARRAY_BUFFER_TARGET = this.context.ARRAY_BUFFER; ///
    this.FLOAT_TYPE = this.context.FLOAT; ///
    this.VERTEX_SHADER_TYPE = this.context.VERTEX_SHADER; ///
    this.FRAGMENT_SHADER_TYPE = this.context.FRAGMENT_SHADER; ///
    this.LINK_STATUS_PNAME = this.context.LINK_STATUS; ///
    this.COMPILE_STATUS_PNAME = this.context.COMPILE_STATUS; ///
    this.COLOR_BUFFER_BIT_MASK = this.context.COLOR_BUFFER_BIT; ///
    this.DEPTH_BUFFER_BIT_MASK = this.context.DEPTH_BUFFER_BIT; ///
  }

  _createClass(Canvas, [{
    key: 'getContext',
    value: function getContext() {
      return this.context;
    }
  }, {
    key: 'getClientWidth',
    value: function getClientWidth() {
      return this.domElement.clientWidth;
    }
  }, {
    key: 'getClientHeight',
    value: function getClientHeight() {
      return this.domElement.clientHeight;
    }
  }, {
    key: 'getUniformLocation',
    value: function getUniformLocation(program, name) {
      return this.context.getUniformLocation(program, name);
    }
  }, {
    key: 'getAttributeLocation',
    value: function getAttributeLocation(program, name) {
      return this.context.getAttribLocation(program, name);
    }
  }, {
    key: 'useProgram',
    value: function useProgram(program) {
      this.context.useProgram(program);
    }
  }, {
    key: 'render',
    value: function render(shaderProgram, projection, modelView) {
      this.useProgram(shaderProgram);

      var projectionMatrix = projection.getMatrix(),
          modelViewMatrix = modelView.getMatrix(),
          projectionMatrixUniformLocation = this.getUniformLocation(shaderProgram, 'uProjectionMatrix'),
          modelViewMatrixUniformLocation = this.getUniformLocation(shaderProgram, 'uModelViewMatrix');

      this.enableDepthTesting();
      this.enableDepthFunction();

      this.clearColour();
      this.clearDepth();
      this.clearColourBuffer();
      this.clearDepthBuffer();

      this.applyMatrix(projectionMatrixUniformLocation, projectionMatrix);
      this.applyMatrix(modelViewMatrixUniformLocation, modelViewMatrix);
    }
  }, {
    key: 'applyMatrix',
    value: function applyMatrix(uniformLocation, matrix) {
      this.context.uniformMatrix4fv(uniformLocation, false, matrix);
    }
  }, {
    key: 'draw',
    value: function draw(vertexCount) {
      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultOffset;

      this.context.drawArrays(this.context.TRIANGLE_STRIP, offset, vertexCount);
    }
  }]);

  return Canvas;
}();

Object.assign(Canvas.prototype, bufferMixin);
Object.assign(Canvas.prototype, shaderMixin);
Object.assign(Canvas.prototype, colourMixin);
Object.assign(Canvas.prototype, depthMixin);

module.exports = Canvas;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL2VzNi9jYW52YXMuanMiXSwibmFtZXMiOlsiZG9tVXRpbGl0aWVzIiwicmVxdWlyZSIsImJ1ZmZlck1peGluIiwic2hhZGVyTWl4aW4iLCJjb2xvdXJNaXhpbiIsImRlcHRoTWl4aW4iLCJkb21FbGVtZW50RnJvbVNlbGVjdG9yIiwiZGVmYXVsdE9mZnNldCIsIkNhbnZhcyIsInNlbGVjdG9yIiwiZG9tRWxlbWVudCIsImNvbnRleHQiLCJnZXRDb250ZXh0IiwiRXJyb3IiLCJERVBUSF9URVNUX0NBUCIsIkRFUFRIX1RFU1QiLCJMRVFVQUxfRlVOQ1RJT04iLCJMRVFVQUwiLCJTVEFUSUNfRFJBV19VU0FHRSIsIlNUQVRJQ19EUkFXIiwiQVJSQVlfQlVGRkVSX1RBUkdFVCIsIkFSUkFZX0JVRkZFUiIsIkZMT0FUX1RZUEUiLCJGTE9BVCIsIlZFUlRFWF9TSEFERVJfVFlQRSIsIlZFUlRFWF9TSEFERVIiLCJGUkFHTUVOVF9TSEFERVJfVFlQRSIsIkZSQUdNRU5UX1NIQURFUiIsIkxJTktfU1RBVFVTX1BOQU1FIiwiTElOS19TVEFUVVMiLCJDT01QSUxFX1NUQVRVU19QTkFNRSIsIkNPTVBJTEVfU1RBVFVTIiwiQ09MT1JfQlVGRkVSX0JJVF9NQVNLIiwiQ09MT1JfQlVGRkVSX0JJVCIsIkRFUFRIX0JVRkZFUl9CSVRfTUFTSyIsIkRFUFRIX0JVRkZFUl9CSVQiLCJjbGllbnRXaWR0aCIsImNsaWVudEhlaWdodCIsInByb2dyYW0iLCJuYW1lIiwiZ2V0VW5pZm9ybUxvY2F0aW9uIiwiZ2V0QXR0cmliTG9jYXRpb24iLCJ1c2VQcm9ncmFtIiwic2hhZGVyUHJvZ3JhbSIsInByb2plY3Rpb24iLCJtb2RlbFZpZXciLCJwcm9qZWN0aW9uTWF0cml4IiwiZ2V0TWF0cml4IiwibW9kZWxWaWV3TWF0cml4IiwicHJvamVjdGlvbk1hdHJpeFVuaWZvcm1Mb2NhdGlvbiIsIm1vZGVsVmlld01hdHJpeFVuaWZvcm1Mb2NhdGlvbiIsImVuYWJsZURlcHRoVGVzdGluZyIsImVuYWJsZURlcHRoRnVuY3Rpb24iLCJjbGVhckNvbG91ciIsImNsZWFyRGVwdGgiLCJjbGVhckNvbG91ckJ1ZmZlciIsImNsZWFyRGVwdGhCdWZmZXIiLCJhcHBseU1hdHJpeCIsInVuaWZvcm1Mb2NhdGlvbiIsIm1hdHJpeCIsInVuaWZvcm1NYXRyaXg0ZnYiLCJ2ZXJ0ZXhDb3VudCIsIm9mZnNldCIsImRyYXdBcnJheXMiLCJUUklBTkdMRV9TVFJJUCIsIk9iamVjdCIsImFzc2lnbiIsInByb3RvdHlwZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7QUFFQSxJQUFNQSxlQUFlQyxRQUFRLGlCQUFSLENBQXJCO0FBQUEsSUFDTUMsY0FBY0QsUUFBUSxnQkFBUixDQURwQjtBQUFBLElBRU1FLGNBQWNGLFFBQVEsZ0JBQVIsQ0FGcEI7QUFBQSxJQUdNRyxjQUFjSCxRQUFRLGdCQUFSLENBSHBCO0FBQUEsSUFJTUksYUFBYUosUUFBUSxlQUFSLENBSm5COztJQU1RSyxzQixHQUEyQk4sWSxDQUEzQk0sc0I7OztBQUVSLElBQU1DLGdCQUFnQixDQUF0Qjs7SUFFTUMsTTtBQUNKLG9CQUFpQztBQUFBLFFBQXJCQyxRQUFxQix1RUFBVixRQUFVOztBQUFBOztBQUMvQixRQUFNQyxhQUFhSix1QkFBdUJHLFFBQXZCLENBQW5CO0FBQUEsUUFDTUUsVUFBVUQsV0FBV0UsVUFBWCxDQUFzQixPQUF0QixDQURoQjs7QUFHQSxRQUFJLENBQUNELE9BQUwsRUFBYztBQUNaLFlBQU0sSUFBSUUsS0FBSixxQ0FBTjtBQUNEOztBQUVELFNBQUtGLE9BQUwsR0FBZUEsT0FBZjs7QUFFQSxTQUFLRCxVQUFMLEdBQWtCQSxVQUFsQjs7QUFFQSxTQUFLSSxjQUFMLEdBQXNCLEtBQUtILE9BQUwsQ0FBYUksVUFBbkMsQ0FaK0IsQ0FZaUI7QUFDaEQsU0FBS0MsZUFBTCxHQUF1QixLQUFLTCxPQUFMLENBQWFNLE1BQXBDLENBYitCLENBYWE7QUFDNUMsU0FBS0MsaUJBQUwsR0FBeUIsS0FB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LENBQWMxRCxPQUFPMkQsU0FBckIsRUFBZ0M5RCxVQUFoQzs7QUFFQStELE9BQU9DLE9BQVAsR0FBaUI3RCxNQUFqQiIsImZpbGUiOiJjYW52YXMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmNvbnN0IGRvbVV0aWxpdGllcyA9IHJlcXVpcmUoJy4vdXRpbGl0aWVzL2RvbScpLFxuICAgICAgYnVmZmVyTWl4aW4gPSByZXF1aXJlKCcuL21peGluL2J1ZmZlcicpLFxuICAgICAgc2hhZGVyTWl4aW4gPSByZXF1aXJlKCcuL21peGluL3NoYWRlcicpLFxuICAgICAgY29sb3VyTWl4aW4gPSByZXF1aXJlKCcuL21peGluL2NvbG91cicpLFxuICAgICAgZGVwdGhNaXhpbiA9IHJlcXVpcmUoJy4vbWl4aW4vZGVwdGgnKTtcblxuY29uc3QgeyBkb21FbGVtZW50RnJvbVNlbGVjdG9yIH0gPSBkb21VdGlsaXRpZXM7XG5cbmNvbnN0IGRlZmF1bHRPZmZzZXQgPSAwO1xuXG5jbGFzcyBDYW52YXMge1xuICBjb25zdHJ1Y3RvcihzZWxlY3RvciA9ICdjYW52YXMnKSB7XG4gICAgY29uc3QgZG9tRWxlbWVudCA9IGRvbUVsZW1lbnRGcm9tU2VsZWN0b3Ioc2VsZWN0b3IpLFxuICAgICAgICAgIGNvbnRleHQgPSBkb21FbGVtZW50LmdldENvbnRleHQoJ3dlYmdsJyk7XG5cbiAgICBpZiAoIWNvbnRleHQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVW5hYmxlIHRvIGluaXRpYWxpc2UgdGhlIGNvbnRleHQuYCk7XG4gICAgfVxuXG4gICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcblxuICAgIHRoaXMuZG9tRWxlbWVudCA9IGRvbUVsZW1lbnQ7XG5cbiAgICB0aGlzLkRFUFRIX1RFU1RfQ0FQID0gdGhpcy5jb250ZXh0LkRFUFRIX1RFU1Q7ICAvLy9cbiAgICB0aGlzLkxFUVVBTF9GVU5DVElPTiA9IHRoaXMuY29udGV4dC5MRVFVQUw7IC8vL1xuICAgIHRoaXMuU1RBVElDX0RSQVdfVVNBR0UgPSB0aGlzLmNvbnRleHQuU1RBVElDX0RSQVc7IC8vL1xuICAgIHRoaXMuQVJSQVlfQlVGRkVSX1RBUkdFVCA9IHRoaXMuY29udGV4dC5BUlJBWV9CVUZGRVI7ICAvLy9cbiAgICB0aGlzLkZMT0FUX1RZUEUgPSB0aGlzLmNvbnRleHQuRkxPQVQ7ICAvLy9cbiAgICB0aGlzLlZFUlRFWF9TSEFERVJfVFlQRSA9IHRoaXMuY29udGV4dC5WRVJURVhfU0hBREVSOyAvLy9cbiAgICB0aGlzLkZSQUdNRU5UX1NIQURFUl9UWVBFID0gdGhpcy5jb250ZXh0LkZSQUdNRU5UX1NIQURFUjsgLy8vXG4gICAgdGhpcy5MSU5LX1NUQVRVU19QTkFNRSA9IHRoaXMuY29udGV4dC5MSU5LX1NUQVRVUzsgIC8vL1xuICAgIHRoaXMuQ09NUElMRV9TVEFUVVNfUE5BTUUgPSB0aGlzLmNvbnRleHQuQ09NUElMRV9TVEFUVVM7ICAvLy9cbiAgICB0aGlzLkNPTE9SX0JVRkZFUl9CSVRfTUFTSyA9IHRoaXMuY29udGV4dC5DT0xPUl9CVUZGRVJfQklUOyAvLy9cbiAgICB0aGlzLkRFUFRIX0JVRkZFUl9CSVRfTUFTSyA9IHRoaXMuY29udGV4dC5ERVBUSF9CVUZGRVJfQklUOyAvLy9cbiAgfVxuXG4gIGdldENvbnRleHQoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29udGV4dDtcbiAgfVxuXG4gIGdldENsaWVudFdpZHRoKCkgeyByZXR1cm4gdGhpcy5kb21FbGVtZW50LmNsaWVudFdpZHRoOyB9XG5cbiAgZ2V0Q2xpZW50SGVpZ2h0KCkgeyByZXR1cm4gdGhpcy5kb21FbGVtZW50LmNsaWVudEhlaWdodDsgfVxuXG4gIGdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCBuYW1lKSB7IHJldHVybiB0aGlzLmNvbnRleHQuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sIG5hbWUpOyB9XG5cbiAgZ2V0QXR0cmlidXRlTG9jYXRpb24ocHJvZ3JhbSwgbmFtZSkgeyByZXR1cm4gdGhpcy5jb250ZXh0LmdldEF0dHJpYkxvY2F0aW9uKHByb2dyYW0sIG5hbWUpOyB9XG5cbiAgdXNlUHJvZ3JhbShwcm9ncmFtKSB7IHRoaXMuY29udGV4dC51c2VQcm9ncmFtKHByb2dyYW0pOyB9XG5cbiAgcmVuZGVyKHNoYWRlclByb2dyYW0sIHByb2plY3Rpb24sIG1vZGVsVmlldykge1xuICAgIHRoaXMudXNlUHJvZ3JhbShzaGFkZXJQcm9ncmFtKTtcblxuICAgIGNvbnN0IHByb2plY3Rpb25NYXRyaXggPSBwcm9qZWN0aW9uLmdldE1hdHJpeCgpLFxuICAgICAgICAgIG1vZGVsVmlld01hdHJpeCA9IG1vZGVsVmlldy5nZXRNYXRyaXgoKSxcbiAgICAgICAgICBwcm9qZWN0aW9uTWF0cml4VW5pZm9ybUxvY2F0aW9uID0gdGhpcy5nZXRVbmlmb3JtTG9jYXRpb24oc2hhZGVyUHJvZ3JhbSwgJ3VQcm9qZWN0aW9uTWF0cml4JyksXG4gICAgICAgICAgbW9kZWxWaWV3TWF0cml4VW5pZm9ybUxvY2F0aW9uID0gdGhpcy5nZXRVbmlmb3JtTG9jYXRpb24oc2hhZGVyUHJvZ3JhbSwgJ3VNb2RlbFZpZXdNYXRyaXgnKTtcblxuICAgIHRoaXMuZW5hYmxlRGVwdGhUZXN0aW5nKCk7XG4gICAgdGhpcy5lbmFibGVEZXB0aEZ1bmN0aW9uKCk7XG5cbiAgICB0aGlzLmNsZWFyQ29sb3VyKCk7XG4gICAgdGhpcy5jbGVhckRlcHRoKCk7XG4gICAgdGhpcy5jbGVhckNvbG91ckJ1ZmZlcigpO1xuICAgIHRoaXMuY2xlYXJEZXB0aEJ1ZmZlcigpO1xuXG4gICAgdGhpcy5hcHBseU1hdHJpeChwcm9qZWN0aW9uTWF0cml4VW5pZm9ybUxvY2F0aW9uLCBwcm9qZWN0aW9uTWF0cml4KTtcbiAgICB0aGlzLmFwcGx5TWF0cml4KG1vZGVsVmlld01hdHJpeFVuaWZvcm1Mb2NhdGlvbiwgbW9kZWxWaWV3TWF0cml4KTtcbiAgfVxuXG4gIGFwcGx5TWF0cml4KHVuaWZvcm1Mb2NhdGlvbiwgbWF0cml4KSB7XG4gICAgdGhpcy5jb250ZXh0LnVuaWZvcm1NYXRyaXg0ZnYodW5pZm9ybUxvY2F0aW9uLCBmYWxzZSwgbWF0cml4KTtcbiAgfVxuICBcbiAgZHJhdyh2ZXJ0ZXhDb3VudCwgb2Zmc2V0ID0gZGVmYXVsdE9mZnNldCkge1xuICAgIHRoaXMuY29udGV4dC5kcmF3QXJyYXlzKHRoaXMuY29udGV4dC5UUklBTkdMRV9TVFJJUCwgb2Zmc2V0LCB2ZXJ0ZXhDb3VudCk7XG4gIH1cbn1cblxuT2JqZWN0LmFzc2lnbihDYW52YXMucHJvdG90eXBlLCBidWZmZXJNaXhpbik7XG5PYmplY3QuYXNzaWduKENhbnZhcy5wcm90b3R5cGUsIHNoYWRlck1peGluKTtcbk9iamVjdC5hc3NpZ24oQ2FudmFzLnByb3RvdHlwZSwgY29sb3VyTWl4aW4pO1xuT2JqZWN0LmFzc2lnbihDYW52YXMucHJvdG90eXBlLCBkZXB0aE1peGluKTtcblxubW9kdWxlLmV4cG9ydHMgPSBDYW52YXM7XG4iXX0=